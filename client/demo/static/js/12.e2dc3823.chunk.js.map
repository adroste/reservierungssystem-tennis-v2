{"version":3,"sources":["calendar/useTime.js","calendar/DatePicker.js","calendar/ReservationDetails.js","calendar/ReservationGroupModal.module.css","user/LoginForm.js","user/LoginForm.module.css","calendar/DatePicker.module.css","calendar/DateTimeRangeSelect.module.css","calendar/ReservationDetails.module.css","calendar/ScrollRadioGroup.module.css","calendar/RepeatReservationForm.module.css","calendar/ReservationDetailsForm.module.css","user/VerifyMailModal.module.css","calendar/DateTimeRangeSelect.js","calendar/ScrollRadioGroup.js","calendar/DisableReservationGroupModal.js","user/LoginModal.js","calendar/RepeatReservationForm.js","calendar/ReservationTimeSelect.js","calendar/ReservationDetailsForm.js","calendar/ReservationGroupModal.js","user/VerifyMailModal.js","calendar/ReservationModal.js","calendar/SlotCell.module.css","calendar/DayTable.module.css","calendar/HoursTable.module.css","calendar/ReservationCalendar.module.css","calendar/SlotCell.js","calendar/DayTable.js","calendar/HoursTable.js","calendar/ReservationCalendar.js","calendar/WeekPicker.module.css","calendar/CalendarPage.module.css","../node_modules/@ant-design/icons-svg/es/asn/LeftOutlined.js","../node_modules/@ant-design/icons/es/icons/LeftOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/RightOutlined.js","../node_modules/@ant-design/icons/es/icons/RightOutlined.js","calendar/WeekPicker.js","calendar/CalendarPage.js"],"names":["useTime","unit","useState","dayjs","time","setTime","useEffect","interval","setInterval","newTime","isSame","clearInterval","AntDatePicker","generatePicker","dayjsGenerateConfig","DatePicker","props","inputReadOnly","size","panelRender","panel","className","styles","pickerPanel","cn","classNames","bind","ReservationDetails","court","date","inline","name","repeat","wrapper","item","title","content","module","exports","LoginForm","useContext","authContext","autoLoginState","setUser","setRememberLogin","useApi","postLoginApi","loginState","login","loading","valStatus","error","undefined","onFinish","useCallback","mail","password","rememberLogin","type","layout","Item","message","rules","required","validateStatus","autoComplete","prefix","style","color","placeholder","disabled","Password","valuePropName","noStyle","forgotLink","to","htmlType","loginButton","text","registerItem","DateTimeRangeSelect","from","onFromChange","onToChange","hours","useMemo","Array","keys","updateTimes","newFrom","newTo","isAfter","tmp","add","handleFromDateChange","newFromDate","hour","handleToDateChange","newToDate","handleFromHourChange","newFromHour","handleToHourChange","newToHour","allowClear","bordered","datePicker","format","onChange","showToday","suffixIcon","DownOutlined","value","map","Option","ScrollRadioGroup","children","rest","innerRef","useRef","leftScroll","setLeftScroll","rightScroll","setRightScroll","updateStops","current","scrollLeft","scrollWidth","offsetWidth","handleClick","e","offsetLeft","target","parentNode","requestAnimationFrame","Math","max","outer","inner","onClick","onScroll","ref","Group","buttonStyle","DisableReservationGroupModal","initialFrom","initialCourtId","reservation","setOuterReservations","setReservations","appContext","visibleHours","config","courts","reason","setReason","startOf","setFrom","setTo","courtId","setCourtId","prevErrorRef","postReservationGroupApi","postState","postReservationGroup","patchReservationGroupApi","patchState","patchReservationGroup","changed","unavailableReservations","uaRes","handleChangeReason","handleCourtIdChange","handleDisableCourt","checkDate","isSameOrAfter","Modal","icon","width","centered","confirm","okText","okType","onOk","path","groupId","reservations","success","RESERVATION_TYPES","DISABLE","handleRemoveDisable","post","patch","getCourtName","visible","onCancel","footer","ErrorResult","StatusText","Button","label","changeReasonHint","LoginModal","onClose","defaultRepeatValuesMap","1","7","14","RepeatReservationForm","currentReservations","defaultAddCount","repeatValuesMap","user","reservationDaysInAdvance","now","repeatValue","setRepeatValue","visibleDates","setVisibleDates","selectedDates","_setSelectedDates","fromToHourDiff","abs","diff","dateToReservation","checkIfTooFarAhead","checkIfNotAvailable","r1","some","r2","setSelectedDates","_selectedDates","dates","filter","d","s","length","r","sort","a","b","valueOf","Number","MAX_SAFE_INTEGER","i","min","toString","allowedValues","Object","includes","first","last","count","push","addDate","handleRepeatValueChange","newRepeatValue","handleCheckedChange","checked","newSelection","newVisibleDates","pop","reserved","cr","sd","change","past","isBefore","notAvailable","tooFarAhead","dateButton","unchecked","danger","admin","LockOutlined","DeleteOutlined","PlusOutlined","extra","buttons","ReservationTimeSelect","visibleHoursToHoursArray","toHours","reduce","h","handleFromChange","handleToChange","direction","ReservationDetailsForm","onCourtIdChange","onReservationsChange","onTextChange","readOnly","editName","setEditName","handleEditName","handleCancelEditName","handleDateChange","handleTextChange","plain","nameInput","EditOutlined","ReservationGroupModal","reservationTos","templates","changeReason","setChangeReason","setText","groupReservations","setGroupReservations","getReservationsApi","state","getGroupReservations","adminEdit","userId","canEdit","newReservations","gr","cancelReservations","changeText","query","handleChangeChangeReason","handlePostReservation","dangerouslySetInnerHTML","__html","body","NORMAL","handleChangeReservation","ExclamationCircleOutlined","heading","cancelText","handleCancelReservation","cancelType","doDelete","reqParams","cancelRadioGroup","defaultValue","Ball","spin","large","TextArea","autoSize","VerifyMailModal","history","useHistory","handleChangeMailClick","handleResendMail","status","ReservationModal","verified","SlotCell","alwaysClickable","courtName","rowSpan","maxRowSpan","indexOf","cell","enabled","padding","slot","mine","height","CELL_PADDING_PX","data-free-text","data-free-text-hover","singleLine","DayTable","onDisableCourtClick","onSlotClick","disableOverlay","setDisableOverlay","isToday","reservableAsOf","subtract","showInfoOverlay","handleDisableOverlayClick","today","cols","blur","findReservation","adminAction","infoOverlay","linkButton","HoursTable","highlightHour","highlight","ReservationCalendar","kiosk","selectedDate","selectedSlot","setSelectedSlot","scrollerRef","getReservations","updateReservations","start","toISOString","end","endOf","useUpdateEffect","UPDATE_INTERVALS_SEC","RESERVATIONS","_","index","handleSlotClicked","handleDisableCourtClicked","handleReservationFinish","tableWrapper","tableScroller","LeftOutlined","React","AntdIcon","assign","LeftOutlinedSvg","displayName","RightOutlined","RightOutlinedSvg","WeekPicker","open","setOpen","handlePreviousButtonClick","handleNextButtonClick","handleThisWeekButtonClick","handleChange","handleOpenChange","newOpen","middlePicker","picker","onOpenChange","renderExtraFooter","outerThisWeekButton","leftButton","rightButton","CalendarPage","setSelectedDate","handleWeekChange"],"mappings":"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","file":"static/js/12.e2dc3823.chunk.js","sourcesContent":["import { useEffect, useState } from 'react';\n\nimport dayjs from 'dayjs';\n\nconst checkIntervalMs = 60000; // minute\n\nexport function useTime(unit) {\n    const [time, setTime] = useState(() => dayjs());\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            const newTime = dayjs();\n            if (!time.isSame(newTime, unit))\n                setTime(newTime);\n        }, checkIntervalMs);\n\n        return () => clearInterval(interval);\n    }, [time, unit]);\n\n    return time;\n}","import dayjsGenerateConfig from 'rc-picker/lib/generate/dayjs';\nimport generatePicker from 'antd/es/date-picker/generatePicker';\nimport styles from './DatePicker.module.css';\n\nconst AntDatePicker = generatePicker(dayjsGenerateConfig);\n\nexport function DatePicker(props) {\n    return (\n        <AntDatePicker\n            inputReadOnly\n            size=\"large\"\n            panelRender={panel => \n                <div className={styles.pickerPanel}>\n                    {panel}\n                </div>\n            }\n            {...props}\n        />\n    );\n}","import { CalendarOutlined, ClockCircleOutlined, EnvironmentOutlined, RedoOutlined, UserOutlined } from '@ant-design/icons';\n\nimport React from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './ReservationDetails.module.css';\n\nconst cn = classNames.bind(styles);\n\nexport function ReservationDetails({\n    court,\n    date,\n    inline = false,\n    name,\n    repeat,\n    time,\n}) {\n    return (\n        <div className={cn({\n            wrapper: true,\n            inline\n        })}>\n            {name &&\n                <div className={styles.item}>\n                    <div className={styles.title}>\n                        <UserOutlined />&nbsp;Name\n                    </div>\n                    <div className={styles.content}>\n                        {name}\n                    </div>\n                </div>\n            }\n\n            {date && \n                <div className={styles.item}>\n                    <div className={styles.title}>\n                        <CalendarOutlined />&nbsp;Datum\n                    </div>\n                    <div className={styles.content}>\n                        {date}\n                    </div>\n                </div>\n            }\n\n            {time &&\n                <div className={styles.item}>\n                    <div className={styles.title}>\n                        <ClockCircleOutlined />&nbsp;Uhrzeit\n                    </div>\n                    <div className={styles.content}>\n                        {time}\n                    </div>\n                </div>\n            }\n\n            {court &&\n                <div className={styles.item}>\n                    <div className={styles.title}>\n                        <EnvironmentOutlined />&nbsp;Platz\n                    </div>\n                    <div className={styles.content}>\n                        {court}\n                    </div>\n                </div>\n            }\n\n            {repeat &&\n                <div className={styles.item}>\n                    <div className={styles.title}>\n                        <RedoOutlined />&nbsp;Wiederholung\n                    </div>\n                    <div className={styles.content}>\n                        {repeat}\n                    </div>\n                </div>\n            }\n        </ div>\n    );\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ReservationGroupModal_wrapper__2fAcz\",\"footer\":\"ReservationGroupModal_footer__1O-So\",\"heading\":\"ReservationGroupModal_heading__3HVFg\",\"changeReasonHint\":\"ReservationGroupModal_changeReasonHint__IWCAI\",\"cancelRadioGroup\":\"ReservationGroupModal_cancelRadioGroup__joJ8_\"};","import { Alert, Button, Checkbox, Form, Input } from 'antd';\nimport { LockOutlined, MailOutlined } from '@ant-design/icons';\nimport React, { useCallback, useContext } from 'react';\n\nimport { Link } from 'react-router-dom';\nimport { StatusText } from '../admin/StatusText';\nimport { authContext } from '../AuthContext';\nimport { postLoginApi } from '../api';\nimport styles from './LoginForm.module.css';\nimport { useApi } from '../useApi';\n\nexport function LoginForm() {\n\n    const { autoLoginState, setUser, setRememberLogin } = useContext(authContext);\n    const [loginState, login] = useApi(postLoginApi, setUser);\n\n    const loading = loginState.loading || autoLoginState.loading;\n    const valStatus = loginState.error ? 'error' : undefined;\n\n    const onFinish = useCallback(({ mail, password, rememberLogin }) => {\n        setRememberLogin(rememberLogin);\n        login(null, {\n            type: 'plain',\n            mail,\n            password,\n        });\n    }, [login, setRememberLogin]);\n\n    return (\n        <Form\n            layout=\"vertical\"\n            onFinish={onFinish}\n        >\n            {loginState.error &&\n                <Form.Item>\n                    <Alert\n                        type=\"error\"\n                        message=\"Login fehlgeschlagen.\"\n                    />\n                </Form.Item>\n            }\n\n            <Form.Item\n                name=\"mail\"\n                rules={[{ required: true, message: 'E-Mail Adresse ist erforderlich' }]}\n                validateStatus={valStatus}\n            >\n                <Input\n                    autoComplete=\"email\"\n                    prefix={<MailOutlined style={{ color: '#aaa' }} />}\n                    placeholder=\"E-Mail\"\n                    disabled={loading}\n                />\n            </Form.Item>\n\n            <Form.Item\n                name=\"password\"\n                rules={[{ required: true, message: 'Passwort ist erforderlich' }]}\n                validateStatus={valStatus}\n            >\n                <Input.Password\n                    autoComplete=\"current-password\"\n                    prefix={<LockOutlined style={{ color: '#aaa' }} />}\n                    placeholder=\"Passwort\"\n                    disabled={loading}\n                />\n            </Form.Item>\n\n            <Form.Item>\n                <Form.Item name=\"rememberLogin\" valuePropName=\"checked\" noStyle>\n                    <Checkbox\n                        disabled={loading}\n                    >\n                        Angemeldet bleiben\n                    </Checkbox>\n                </Form.Item>\n\n                {/* TODO */}\n                <Link className={styles.forgotLink} to=\"/reset-password\">\n                    Password vergessen\n                </Link>\n            </Form.Item>\n\n            <Form.Item>\n                <Button\n                    type=\"primary\"\n                    htmlType=\"submit\"\n                    className={styles.loginButton}\n                    disabled={loading}\n                >\n                    <StatusText\n                        loading={loading}\n                        text={loading ? 'Anmeldung...' : 'Anmelden'}\n                    />\n                </Button>\n            </Form.Item>\n\n\n            <Form.Item className={styles.registerItem}>\n                <span>oder </span>\n                <Link to=\"/register\">Kostenlos Registrieren</Link>\n            </Form.Item>\n        </Form>\n    );\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginButton\":\"LoginForm_loginButton__ECun6\",\"forgotLink\":\"LoginForm_forgotLink__3TG3V\",\"registerItem\":\"LoginForm_registerItem__32Qy-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pickerPanel\":\"DatePicker_pickerPanel__jgKnn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"datePicker\":\"DateTimeRangeSelect_datePicker__1Fzuj\",\"to\":\"DateTimeRangeSelect_to__3kFPy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inline\":\"ReservationDetails_inline__3Zvud\",\"wrapper\":\"ReservationDetails_wrapper__3oaB0\",\"item\":\"ReservationDetails_item__3c9da\",\"title\":\"ReservationDetails_title__30qxj\",\"content\":\"ReservationDetails_content__3o1oW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"outer\":\"ScrollRadioGroup_outer__2bjrJ\",\"inner\":\"ScrollRadioGroup_inner__1IIQl\",\"leftScroll\":\"ScrollRadioGroup_leftScroll__sR-on\",\"rightScroll\":\"ScrollRadioGroup_rightScroll__2FgOg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"RepeatReservationForm_wrapper__q6uz0\",\"dates\":\"RepeatReservationForm_dates__1dD0l\",\"extra\":\"RepeatReservationForm_extra__2m-4n\",\"unchecked\":\"RepeatReservationForm_unchecked__dAyq1\",\"date\":\"RepeatReservationForm_date__3wvGK\",\"dateButton\":\"RepeatReservationForm_dateButton__2XPFl\",\"danger\":\"RepeatReservationForm_danger__3-oIh\",\"buttons\":\"RepeatReservationForm_buttons__IeXBV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nameInput\":\"ReservationDetailsForm_nameInput__20wfd\",\"plain\":\"ReservationDetailsForm_plain__VkUtA\",\"datePicker\":\"ReservationDetailsForm_datePicker__jvGx4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"VerifyMailModal_buttons__2ZzQz\"};","import React, { useCallback, useMemo } from 'react';\n\nimport { DatePicker } from './DatePicker';\nimport { DownOutlined } from '@ant-design/icons';\nimport { Select } from 'antd';\nimport styles from './DateTimeRangeSelect.module.css';\n\nexport function DateTimeRangeSelect({\n    disabled = false,\n    from,\n    to,\n    onFromChange,\n    onToChange,\n}) {\n    const hours = useMemo(() => [...Array(24).keys()], []);\n\n    const updateTimes = useCallback(({ newFrom = from, newTo = to }) => {\n        if (newFrom.isAfter(newTo)) {\n            const tmp = newFrom;\n            newFrom = newTo;\n            newTo = tmp;\n        } else if (newFrom.isSame(newTo)) {\n            newTo = newFrom.add(1, 'hour'); // minimal diff 1 hour\n        }\n\n        if (!newFrom.isSame(from))\n            onFromChange(newFrom);\n        if (!newTo.isSame(to))\n            onToChange(newTo);\n    }, [from, onFromChange, onToChange, to]);\n\n    const handleFromDateChange = useCallback(newFromDate => {\n        updateTimes({\n            newFrom: newFromDate.hour(from.hour())\n        });\n    }, [from, updateTimes]);\n\n    const handleToDateChange = useCallback(newToDate => {\n        updateTimes({\n            newTo: newToDate.hour(to.hour())\n        });\n    }, [to, updateTimes]);\n\n    const handleFromHourChange = useCallback(newFromHour => {\n        updateTimes({\n            newFrom: from.hour(newFromHour)\n        });\n    }, [from, updateTimes]);\n\n    const handleToHourChange = useCallback(newToHour => {\n        updateTimes({\n            newTo: to.hour(newToHour)\n        });\n    }, [to, updateTimes]);\n\n    return (\n        <div>\n            <div>\n                <DatePicker\n                    allowClear={false}\n                    bordered={false}\n                    className={styles.datePicker}\n                    disabled={disabled}\n                    format=\"L\"\n                    onChange={handleFromDateChange}\n                    showToday={false}\n                    suffixIcon={<DownOutlined />}\n                    value={from}\n                />\n\n                <Select\n                    size=\"large\"\n                    bordered={false}\n                    value={from.hour()}\n                    onChange={handleFromHourChange}\n                >\n                    {hours.map(hour => (\n                        <Select.Option\n                            key={hour}\n                            value={hour}\n                        >\n                            {hour} Uhr\n                        </Select.Option>\n                    ))}\n                </Select>\n\n            </div>\n\n            <div>\n                <span className={styles.to}>bis</span>\n\n                <DatePicker\n                    allowClear={false}\n                    bordered={false}\n                    className={styles.datePicker}\n                    disabled={disabled}\n                    format=\"L\"\n                    onChange={handleToDateChange}\n                    showToday={false}\n                    suffixIcon={<DownOutlined />}\n                    value={to}\n                />\n\n                <Select\n                    size=\"large\"\n                    bordered={false}\n                    value={to.hour()}\n                    onChange={handleToHourChange}\n                >\n                    {hours.map(hour => (\n                        <Select.Option\n                            key={hour}\n                            value={hour}\n                        >\n                            {hour % 24} Uhr\n                        </Select.Option>\n                    ))}\n                </Select>\n            </div>\n        </div>\n    );\n}","import React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { Radio } from 'antd';\nimport classNames from 'classnames/bind';\nimport styles from './ScrollRadioGroup.module.css';\n\nconst cn = classNames.bind(styles);\n\nconst SCROLL_OFFSET_PX = -50;\nconst SCROLL_TRESHOLD_PX = 5; // needed for iOS overscoll\n\nexport function ScrollRadioGroup({\n    children,\n    ...rest\n}) {\n    const innerRef = useRef();\n    const [leftScroll, setLeftScroll] = useState(false);\n    const [rightScroll, setRightScroll] = useState(false);\n\n    const updateStops = useCallback(() => {\n        if (!innerRef.current)\n            return;\n        const { scrollLeft, scrollWidth, offsetWidth } = innerRef.current;\n        setLeftScroll(scrollLeft > SCROLL_TRESHOLD_PX);\n        setRightScroll((scrollWidth - offsetWidth - scrollLeft) > SCROLL_TRESHOLD_PX);\n    }, []);\n\n    useEffect(updateStops, [updateStops]);\n\n    const handleClick = useCallback(e => {\n        if (!innerRef.current)\n            return;\n        const offsetLeft = e?.target?.parentNode?.parentNode?.offsetLeft || 0;\n        requestAnimationFrame(() => {\n            innerRef.current.scrollLeft = Math.max(offsetLeft + SCROLL_OFFSET_PX, 0);\n        });\n    }, []);\n\n    return (\n        <div className={cn({\n            outer: true,\n            leftScroll,\n            rightScroll,\n        })}>\n            <div\n                className={styles.inner}\n                onClick={handleClick}\n                onScroll={updateStops}\n                ref={innerRef}\n            >\n                <Radio.Group\n                    buttonStyle=\"solid\"\n                    size=\"large\"\n                    {...rest}\n                >\n                    {children}\n                </Radio.Group>\n            </div>\n        </div>\n    );\n}","import { Button, Form, Input, Modal, Radio, message } from 'antd';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { patchReservationGroupApi, postReservationGroupApi } from '../api';\n\nimport { DateTimeRangeSelect } from './DateTimeRangeSelect';\nimport { ErrorResult } from '../ErrorResult';\nimport { RESERVATION_TYPES } from '../ReservationTypes';\nimport { ReservationDetails } from './ReservationDetails';\nimport { ScrollRadioGroup } from './ScrollRadioGroup';\nimport { StatusText } from '../admin/StatusText';\nimport { appContext } from '../AppContext';\nimport dayjs from 'dayjs';\nimport { getCourtName } from '../helper';\nimport styles from './ReservationGroupModal.module.css';\nimport { useApi } from '../useApi';\n\nexport function DisableReservationGroupModal({\n    initialFrom,\n    initialCourtId,\n    reservation,\n    onFinish,\n    setReservations: setOuterReservations,\n}) {\n    const { config: { visibleHours }, courts } = useContext(appContext);\n\n    const [reason, setReason] = useState(reservation?.text || '');\n    const [from, setFrom] = useState(() => reservation?.from || initialFrom.startOf('day'));\n    const [to, setTo] = useState(() => reservation?.to || initialFrom.add(1, 'day').startOf('day'));\n    const [courtId, setCourtId] = useState(reservation?.courtId || initialCourtId);\n    const prevErrorRef = useRef({});\n\n    const [postState, postReservationGroup] = useApi(postReservationGroupApi, setOuterReservations);\n    const [patchState, patchReservationGroup] = useApi(patchReservationGroupApi, setOuterReservations);\n\n    const loading = postState.loading || patchState.loading;\n    const changed = reservation && (\n        reservation.from !== from\n        || reservation.to !== to\n        || reservation.text !== reason\n        || reservation.courtId !== courtId\n    );\n\n    const unavailableReservations = useMemo(() => {\n        let uaRes = postState.error?.unavailableReservations || patchState.error?.unavailableReservations;\n        if (uaRes)\n            uaRes = uaRes.map(({ courtId, from, to }) => ({\n                courtId,\n                from: dayjs(from),\n                to: dayjs(to),\n            }));\n        return uaRes;\n    }, [patchState.error?.unavailableReservations, postState.error?.unavailableReservations]);\n\n    const handleChangeReason = useCallback(e => {\n        setReason(e.target.value);\n    }, []);\n\n    const handleCourtIdChange = useCallback(e => {\n        setCourtId(e.target.value);\n    }, []);\n\n    const handleDisableCourt = useCallback(() => {\n        const doDisable = () => {\n            if (!reservation) {\n                postReservationGroup(null, {\n                    reservations: [{ courtId, from, to }],\n                    text: reason,\n                    type: RESERVATION_TYPES.DISABLE,\n                }, () => {\n                    message.success(\"Sperren erfolgreich\");\n                    onFinish();\n                });\n            } else {\n                patchReservationGroup({\n                    path: {\n                        groupId: reservation.groupId\n                    }\n                }, {\n                    reservations: [{ courtId, from, to }],\n                    text: reason,\n                }, () => {\n                    message.success(\"Sperren erfolgreich\");\n                    onFinish();\n                });\n            }\n        };\n\n        let checkDate;\n        if (from.hour() <= visibleHours[0])\n            checkDate = from.hour(visibleHours[0]);\n        else if (from.hour() >= visibleHours[1])\n            checkDate = from.add(1, 'day').hour(visibleHours[0]);\n\n        if (checkDate?.isSameOrAfter(to, 'hour')) {\n            Modal.error({\n                icon: false,\n                title: 'Sperrung unzulässig',\n                width: 530,\n                centered: true,\n                content: 'Die Sperrung liegt außerhalb des angezeigten Zeitraums.',\n            });\n        } else {\n            Modal.confirm({\n                icon: false,\n                title: 'Wirklich sperren?',\n                okText: 'Sperren',\n                okType: 'danger',\n                width: 530,\n                centered: true,\n                content: 'Bestehende Reservierungen, die mit der Sperrung in Konflikt stehen, werden automatisch storniert. Die Inhaber der Reservierungen werden darüber per E-Mail informiert.',\n                onOk: doDisable,\n            });\n        }\n    }, [courtId, from, onFinish, patchReservationGroup, postReservationGroup, reason, reservation, to, visibleHours]);\n\n    const handleRemoveDisable = useCallback(() => {\n        patchReservationGroup({\n            path: {\n                groupId: reservation.groupId\n            }\n        }, {\n            reservations: [],\n        }, () => {\n            message.success(\"Sperrung aufgehoben\");\n            onFinish();\n        });\n    }, [onFinish, patchReservationGroup, reservation?.groupId]);\n\n    useEffect(() => {\n        if (prevErrorRef.current.post === postState.error\n            && prevErrorRef.current.patch === patchState.error)\n            return;\n        prevErrorRef.current.post = postState.error;\n        prevErrorRef.current.patch = patchState.error;\n\n        if (unavailableReservations) {\n            Modal.error({\n                centered: true,\n                title: 'Sperren fehlgeschlagen',\n                content: (\n                    <div>\n                        <div>\n                            Für folgende Zeiträume liegt bereits eine Sperrung vor:\n                        </div>\n                        <ul>\n                            {unavailableReservations.map(({ courtId, from, to }) => (\n                                <li key={from}>{from.format('dd[\\xa0]L,[\\xa0]H[\\xa0][Uhr]')} bis {to.format('dd[\\xa0]L,[\\xa0]H[\\xa0][Uhr]')}, {getCourtName(courts, courtId)}</li>\n                            ))}\n                        </ul>\n                    </div>\n                )\n            });\n        }\n    }, [courts, patchState.error, postState.error, unavailableReservations])\n\n    if (\n        (postState.error && !postState.error.unavailableReservations)\n        || (patchState.error && !patchState.error.unavailableReservations)\n    ) {\n        return (\n            <Modal\n                title=\"Sperren fehlgeschlagen\"\n                visible={true}\n                centered\n                onCancel={onFinish}\n                onOk={onFinish}\n                footer={\n                    <div className={styles.footer}>\n                        <Button onClick={onFinish}>\n                            Abbrechen\n                        </Button>\n                    </div>\n                }\n            >\n                <div className={styles.wrapper}>\n                    <ErrorResult />\n                </div>\n            </Modal>\n        );\n    }\n\n    return (\n        <Modal\n            title=\"Platz Sperren\"\n            visible={true}\n            width={530}\n            centered\n            onCancel={onFinish}\n            onOk={onFinish}\n            footer={loading ?\n                (\n                    <StatusText\n                        loading\n                        text=\"Bitte warten...\"\n                    />\n                ) : (\n                    <div className={styles.footer}>\n                        <Button onClick={onFinish}>\n                            Abbrechen\n                        </Button>\n                        {reservation &&\n                            <Button\n                                type=\"primary\"\n                                onClick={handleRemoveDisable}\n                            >\n                                Sperrung Aufheben\n                            </Button>\n                        }\n                        <Button\n                            disabled={reservation && !changed}\n                            type=\"danger\"\n                            onClick={handleDisableCourt}\n                        >\n                            Sperren\n                        </Button>\n                    </div>\n                )\n            }\n        >\n            <div className={styles.wrapper}>\n                <ReservationDetails\n                    court={\n                        <ScrollRadioGroup\n                            disabled={loading}\n                            onChange={handleCourtIdChange}\n                            value={courtId}\n                        >\n                            {courts.map(({ courtId, name }) => (\n                                <Radio.Button key={courtId} value={courtId}>{name}</Radio.Button>\n                            ))}\n                        </ScrollRadioGroup>\n                    }\n                    date={\n                        <DateTimeRangeSelect\n                            disabled={loading}\n                            from={from}\n                            to={to}\n                            onFromChange={setFrom}\n                            onToChange={setTo}\n                        />\n                    }\n                />\n\n                <Form layout=\"vertical\">\n                    <Form.Item\n                        label=\"Grund der Sperrung\"\n                    >\n                        <Input\n                            disabled={loading}\n                            onChange={handleChangeReason}\n                            placeholder=\"Kein Grund\"\n                            value={reason}\n                        />\n                        <div className={styles.changeReasonHint}>\n                            Bestehende Reservierungen werden storniert.\n                        </div>\n                    </Form.Item>\n                </Form>\n            </div>\n        </Modal>\n    );\n}","import { LoginForm } from './LoginForm';\nimport { Modal } from 'antd';\nimport React from 'react';\n\nexport function LoginModal({\n    onClose\n}) {\n    return (\n        <Modal\n            title=\"Anmeldung erforderlich\"\n            visible={true}\n            width={400}\n            centered\n            onCancel={onClose}\n            onOk={onClose}\n            footer={null}\n        >\n            <LoginForm />\n        </Modal>\n    );\n}","import { Button, Radio } from 'antd';\nimport { DeleteOutlined, LockOutlined, PlusOutlined } from '@ant-design/icons';\nimport React, { useCallback, useContext, useEffect, useMemo, useState } from 'react';\n\nimport { ScrollRadioGroup } from './ScrollRadioGroup';\nimport { appContext } from '../AppContext';\nimport { authContext } from '../AuthContext';\nimport classNames from 'classnames/bind';\nimport styles from './RepeatReservationForm.module.css';\nimport { useTime } from './useTime';\n\nconst cn = classNames.bind(styles);\n\nconst defaultRepeatValuesMap = {\n    1: 'Täglich',\n    7: 'Wöchentlich',\n    14: '2-Wöchentlich',\n};\n\nexport function RepeatReservationForm({\n    courtId,\n    currentReservations,\n    defaultAddCount = 2,\n    disabled = false,\n    from,\n    onChange,\n    repeatValuesMap = defaultRepeatValuesMap,\n    to,\n    unavailableReservations,\n}) {\n    const { user } = useContext(authContext);\n    const { config: { reservationDaysInAdvance } } = useContext(appContext);\n\n    const now = useTime('hour');\n\n    const [repeatValue, setRepeatValue] = useState(0);\n    const [visibleDates, setVisibleDates] = useState([]);\n    const [selectedDates, _setSelectedDates] = useState([]);\n\n    const fromToHourDiff = useMemo(() => Math.abs(to.diff(from, 'hour')), [from, to]);\n    const dateToReservation = useCallback(from => ({\n        courtId,\n        from,\n        to: from.add(fromToHourDiff, 'hour'),\n    }), [courtId, fromToHourDiff]);\n\n    const checkIfTooFarAhead = useCallback(date => (\n        date.isAfter(now.add(reservationDaysInAdvance, 'day'), 'day')\n    ), [now, reservationDaysInAdvance]);\n\n    const checkIfNotAvailable = useCallback(date => {\n        if (!unavailableReservations)\n            return false;\n        const r1 = dateToReservation(date);\n        return unavailableReservations.some(r2 => (\n            r1.courtId === r2.courtId\n            && r1.from.isSame(r2.from, 'hour')\n            && r1.to.isSame(r2.to, 'hour')\n        ));\n    }, [unavailableReservations, dateToReservation]);\n\n    const setSelectedDates = useCallback(selectedDates => {\n        _setSelectedDates(_selectedDates => {\n            let dates = selectedDates;\n            if (typeof selectedDates === 'function')\n                dates = selectedDates(_selectedDates);\n            return dates.filter(d => !checkIfNotAvailable(d));\n        });\n    }, [checkIfNotAvailable]);\n\n    useEffect(() => {\n        onChange(selectedDates.map(dateToReservation));\n    }, [selectedDates, onChange, dateToReservation]);\n\n    // automatically unchecks unavailable dates if unavailableDates changes\n    useEffect(() => setSelectedDates(s => s), [setSelectedDates]);\n\n    useEffect(() => {\n        let selectedDates = [];\n        let visibleDates = [];\n\n        if (currentReservations?.length > 1) {\n            selectedDates = currentReservations.map(r => r.from.hour(from.hour()));\n            selectedDates.sort((a, b) => a.valueOf() - b.valueOf());\n            let repeatValue = Number.MAX_SAFE_INTEGER;\n\n            if (selectedDates.length > 1) {\n                for (let i = 1; i < selectedDates.length; ++i) {\n                    const diff = selectedDates[i - 1].diff(selectedDates[i], 'day');\n                    repeatValue = Math.min(repeatValue, Math.abs(diff));\n                }\n            }\n\n            repeatValue = repeatValue.toString();\n            const allowedValues = Object.keys(repeatValuesMap);\n            if (!allowedValues.includes(repeatValue))\n                repeatValue = allowedValues[0];\n            setRepeatValue(repeatValue);\n\n            const first = selectedDates[0];\n            const last = selectedDates[selectedDates.length - 1];\n            const count = Math.abs(first.diff(last, 'day') / repeatValue);\n            visibleDates = [];\n            for (let i = 0; i <= count; ++i)\n                visibleDates.push(first.add(i * repeatValue, 'day'));\n        } else if (repeatValue > 0) {\n            for (let i = 0; i <= defaultAddCount; ++i) {\n                const date = from.add(i * repeatValue, 'day');\n                visibleDates.push(date);\n                if (!checkIfNotAvailable(date))\n                    selectedDates.push(date);\n            }\n        } else {\n            selectedDates = [from];\n            visibleDates = [from];\n        }\n\n        setVisibleDates(visibleDates);\n        _setSelectedDates(selectedDates);\n    }, [\n        checkIfNotAvailable,\n        courtId, \n        currentReservations, \n        defaultAddCount, \n        from, \n        repeatValue, \n        repeatValuesMap, \n        to, \n    ]);\n\n    const addDate = useCallback(() => {\n        setVisibleDates(visibleDates => {\n            const last = visibleDates[visibleDates.length - 1];\n            const add = last.add(repeatValue, 'day');\n            if (!checkIfTooFarAhead(add))\n                setSelectedDates(selectedDates => [...selectedDates, add]);\n            return [...visibleDates, add];\n        });\n    }, [repeatValue, setSelectedDates, checkIfTooFarAhead]);\n\n    const handleRepeatValueChange = useCallback(e => {\n        const newRepeatValue = e.target.value;\n        setRepeatValue(newRepeatValue);\n    }, []);\n\n    const handleCheckedChange = useCallback((date, checked) => {\n        setSelectedDates(selectedDates => {\n            // change checked state\n            const newSelection = selectedDates.filter(d => !d.isSame(date, 'day'));\n            if (checked)\n                newSelection.push(date);\n            newSelection.sort((a, b) => a.valueOf() - b.valueOf());\n\n            // remove unchecked visible dates at end\n            setVisibleDates(visibleDates => {\n                const newVisibleDates = [...visibleDates];\n                // i > 0: make sure at least one item is visible\n                for (let i = newVisibleDates.length - 1; i > 0; --i) {\n                    if (\n                        currentReservations?.some(r => r.from.isSame(newVisibleDates[i], 'day'))\n                        || newSelection.some(d => d.isSame(newVisibleDates[i], 'day'))\n                    ) {\n                        break;\n                    }\n                    newVisibleDates.pop();\n                }\n                return newVisibleDates;\n            });\n\n            return newSelection;\n        });\n    }, [currentReservations, setSelectedDates]);\n\n    const dates = useMemo(() => {\n        return visibleDates.map(d => {\n            const r = dateToReservation(d);\n            const reserved = currentReservations?.some(cr => \n                cr.from.isSame(r.from, 'hour') && cr.to.isSame(r.to, 'hour'));\n            const checked = selectedDates.some(sd => sd.isSame(d, 'day'));\n            return {\n                date: d,\n                checked,\n                change: !reserved && currentReservations?.some(r => r.from.isSame(d, 'day')),\n                reserved,\n                past: d.isBefore(now, 'hour'),\n                notAvailable: checkIfNotAvailable(d),\n                tooFarAhead: checkIfTooFarAhead(d),\n                onClick: () => handleCheckedChange(d, !checked),\n            };\n        });\n    }, [\n        checkIfNotAvailable, \n        checkIfTooFarAhead, \n        currentReservations, \n        dateToReservation, \n        handleCheckedChange,\n        now, \n        selectedDates, \n        visibleDates, \n    ]);\n\n\n    return (\n        <div className={styles.wrapper}>\n            <div>\n                <ScrollRadioGroup\n                    disabled={currentReservations?.length > 1 || disabled}\n                    onChange={handleRepeatValueChange}\n                    value={repeatValue}\n                >\n                    <Radio.Button key={0} value={0}>Einzeltermin</Radio.Button>\n                    {Object.keys(repeatValuesMap).map(value => (\n                        <Radio.Button key={value} value={value}>{repeatValuesMap[value]}</Radio.Button>\n                    ))}\n                </ScrollRadioGroup>\n            </div>\n\n            {repeatValue > 0 &&\n                <>\n                    <div className={styles.dates}>\n                        {dates.map(({ date, checked, change, reserved, past, notAvailable, tooFarAhead, onClick }) => (\n                            <Button\n                                key={date}\n                                className={cn({\n                                    dateButton: true,\n                                    unchecked: !checked,\n                                    danger: (reserved && !checked) || notAvailable,\n                                })}\n                                disabled={(!user?.admin && (past || tooFarAhead)) || notAvailable || disabled}\n                                onClick={onClick}\n                                type=\"link\"\n                                icon={\n                                    ((!user?.admin && (past || tooFarAhead)) || notAvailable || disabled) \n                                        ? <LockOutlined />\n                                        : checked ? <DeleteOutlined /> : <PlusOutlined />\n                                }\n                            >\n                                <span className={styles.date}>{date.format('dd[\\xa0]L')}</span>\n                                {!past && reserved && checked && <span className={styles.extra}>Aktuell reserviert</span>}\n                                {!past && reserved && !checked && <span className={styles.extra}>Wird storniert</span>}\n                                {!notAvailable && past && <span className={styles.extra}>Bereits vergangen</span>}\n                                {!notAvailable && tooFarAhead && <span className={styles.extra}>Zu weit in der Zukunft</span>}\n                                {!notAvailable && change && <span className={styles.extra}>Wird geändert</span>}\n                                {notAvailable && <span className={styles.extra}>Nicht verfügbar</span>}\n                            </Button>\n                        ))}\n                    </div>\n                    <div className={styles.buttons}>\n                        <Button\n                            disabled={disabled}\n                            icon={<PlusOutlined />}\n                            onClick={addDate}\n                            type=\"dashed\"\n                        />\n                    </div>\n                </>\n            }\n        </div>\n    );\n}","import React, { useCallback, useContext, useMemo } from 'react';\nimport { Select, Space } from 'antd';\n\nimport { appContext } from '../AppContext';\nimport { visibleHoursToHoursArray } from '../helper';\n\nexport function ReservationTimeSelect({\n    disabled = false,\n    from,\n    to,\n    onFromChange,\n    onToChange,\n}) {\n    const { config: { visibleHours } } = useContext(appContext);\n\n    const hours = useMemo(() => visibleHoursToHoursArray(visibleHours), [visibleHours]);\n\n    const toHours = useMemo(() => hours.reduce((toHours, h) => {\n        if (h >= from.hour())\n            toHours.push(h + 1);\n        return toHours;\n    }, []), [from, hours]);\n\n    const handleFromChange = useCallback(newFromHour => {\n        const diff = Math.abs(to.diff(from, 'hour'));\n        let newToHour = newFromHour + diff;\n        if (!hours.includes(newToHour))\n            newToHour = hours[hours.length - 1] + 1;\n        onFromChange(from.hour(newFromHour));\n        onToChange(to.hour(newToHour));\n    }, [from, to, onFromChange, onToChange, hours]);\n\n    const handleToChange = useCallback(newToHour => {\n        onToChange(to.hour(newToHour));\n    }, [to, onToChange]);\n\n    return (\n        <Space direction=\"horizontal\" size=\"middle\">\n            <Select\n                bordered={false}\n                disabled={disabled}\n                onChange={handleFromChange}\n                size=\"large\"\n                value={from.hour()}\n            >\n                {hours.map(hour => (\n                    <Select.Option\n                        key={hour}\n                        value={hour}\n                    >\n                        {hour} Uhr\n                    </Select.Option>\n                ))}\n            </Select>\n\n            <span>bis</span>\n\n            <Select\n                bordered={false}\n                disabled={disabled}\n                onChange={handleToChange}\n                size=\"large\"\n                value={to.hour()}\n            >\n                {toHours.map(hour => (\n                    <Select.Option\n                        key={hour}\n                        value={hour}\n                    >\n                        {hour % 24} Uhr\n                    </Select.Option>\n                ))}\n            </Select>\n        </Space>\n    );\n}","import { Button, Input, Radio } from 'antd';\nimport { DownOutlined, EditOutlined } from '@ant-design/icons';\nimport React, { useCallback, useContext, useState } from 'react';\n\nimport { DatePicker } from './DatePicker';\nimport { RepeatReservationForm } from './RepeatReservationForm';\nimport { ReservationDetails } from './ReservationDetails';\nimport { ReservationTimeSelect } from './ReservationTimeSelect';\nimport { ScrollRadioGroup } from './ScrollRadioGroup';\nimport { appContext } from '../AppContext';\nimport { authContext } from '../AuthContext';\nimport { getCourtName } from '../helper';\nimport styles from './ReservationDetailsForm.module.css';\n\nexport function ReservationDetailsForm({\n    courtId,\n    currentReservations,\n    disabled,\n    from,\n    onCourtIdChange,\n    onFromChange,\n    onReservationsChange,\n    onTextChange,\n    onToChange,\n    readOnly,\n    text,\n    to,\n    unavailableReservations,\n}) {\n    const { courts } = useContext(appContext);\n    const { user } = useContext(authContext);\n\n    const [editName, setEditName] = useState(false);\n    const handleEditName = useCallback(() => {\n        setEditName(true);\n    }, []);\n\n    const handleCancelEditName = useCallback(() => {\n        setEditName(false);\n        onTextChange(null);\n    }, [onTextChange]);\n\n    const handleDateChange = useCallback(date => {\n        const diff = Math.abs(to.diff(from, 'hour'));\n        const newFrom = date.hour(from.hour());\n        const newTo = newFrom.add(diff, 'hour');\n        onFromChange(newFrom);\n        onToChange(newTo);\n    }, [from, to, onFromChange, onToChange]);\n\n    const handleTextChange = useCallback(e => {\n        onTextChange(e.target.value);\n    }, [onTextChange]);\n\n    const handleCourtIdChange = useCallback(e => {\n        onCourtIdChange(e.target.value);\n    }, [onCourtIdChange]);\n\n    if (readOnly)\n        return (\n            <ReservationDetails\n                court={\n                    <div className={styles.plain}>\n                        {getCourtName(courts, courtId)}\n                    </div>\n                }\n                date={\n                    <div className={styles.plain}>\n                        {from.format('dd[\\xa0]L')}\n                    </div>\n                }\n                time={\n                    <div className={styles.plain}>\n                        {from.format('H')} Uhr bis {to.format('H')} Uhr\n                    </div>\n                }\n                name={\n                    <div className={styles.plain}>\n                        {currentReservations?.[0]?.text || currentReservations?.[0]?.name || user.name}\n                    </div>\n                }\n            />\n\n        );\n\n    return (\n        <ReservationDetails\n            court={\n                <ScrollRadioGroup\n                    disabled={disabled}\n                    onChange={handleCourtIdChange}\n                    value={courtId}\n                >\n                    {courts.map(({ courtId, name }) => (\n                        <Radio.Button key={courtId} value={courtId}>{name}</Radio.Button>\n                    ))}\n                </ScrollRadioGroup>\n            }\n            date={\n                <DatePicker\n                    allowClear={false}\n                    bordered={false}\n                    className={styles.datePicker}\n                    disabled={currentReservations?.length > 1 || disabled}\n                    format=\"L\"\n                    onChange={handleDateChange}\n                    showToday={false}\n                    suffixIcon={<DownOutlined />}\n                    value={from}\n                />\n            }\n            time={\n                <ReservationTimeSelect\n                    disabled={disabled}\n                    from={from}\n                    to={to}\n                    onFromChange={onFromChange}\n                    onToChange={onToChange}\n                />\n            }\n            name={editName ?\n                (\n                    <>\n                        <Input\n                            className={styles.nameInput}\n                            disabled={disabled}\n                            onChange={handleTextChange}\n                            placeholder=\"z.B. Training, ...\"\n                            value={text}\n                            size=\"large\"\n                        />\n                        <Button\n                            disabled={disabled}\n                            onClick={handleCancelEditName}\n                            type='link'\n                        >\n                            abbrechen\n                        </Button>\n                    </>\n                ) : (\n                    <>\n                        <div className={styles.plain}>\n                            <span>\n                                {currentReservations?.[0]?.text || currentReservations?.[0]?.name || user.name}\n                            </span>\n                        </div>\n                        {user.admin &&\n                            <Button\n                                disabled={disabled}\n                                onClick={handleEditName}\n                                type='link'\n                            >\n                                <EditOutlined /> bearbeiten\n                            </Button>\n                        }\n                    </>\n                )\n            }\n            repeat={\n                <RepeatReservationForm\n                    courtId={courtId}\n                    currentReservations={currentReservations}\n                    disabled={disabled}\n                    from={from}\n                    onChange={onReservationsChange}\n                    to={to}\n                    unavailableReservations={unavailableReservations}\n                />\n            }\n        />\n    );\n}","import { Button, Form, Input, Modal, Radio, message } from 'antd';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { getReservationsApi, patchReservationGroupApi, postReservationGroupApi } from '../api';\n\nimport { Ball } from '../Ball';\nimport { ErrorResult } from '../ErrorResult';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\nimport { RESERVATION_TYPES } from '../ReservationTypes';\nimport { ReservationDetailsForm } from './ReservationDetailsForm';\nimport { StatusText } from '../admin/StatusText';\nimport { appContext } from '../AppContext';\nimport { authContext } from '../AuthContext';\nimport dayjs from 'dayjs';\nimport { getCourtName } from '../helper';\nimport styles from './ReservationGroupModal.module.css';\nimport { useApi } from '../useApi';\n\nconst INITIAL_TO_HOUR_ADD = 1;\n\nexport function ReservationGroupModal({\n    initialFrom,\n    initialCourtId,\n    reservation,\n    onFinish,\n    setReservations: setOuterReservations,\n}) {\n    const { courts, templates: { reservationTos } } = useContext(appContext);\n    const { user } = useContext(authContext);\n\n    const [changeReason, setChangeReason] = useState('');\n    const [text, setText] = useState(null);\n    const [reservations, setReservations] = useState(null);\n    const [from, setFrom] = useState(reservation?.from || initialFrom);\n    const [to, setTo] = useState(() => reservation?.to || initialFrom.add(INITIAL_TO_HOUR_ADD, 'hour'));\n    const [courtId, setCourtId] = useState(reservation?.courtId || initialCourtId);\n    const prevErrorRef = useRef({});\n\n    const [groupReservations, setGroupReservations] = useState([]);\n    const [state, getGroupReservations] = useApi(getReservationsApi, setGroupReservations);\n\n    const [postState, postReservationGroup] = useApi(postReservationGroupApi, setOuterReservations);\n    const [patchState, patchReservationGroup] = useApi(patchReservationGroupApi, setOuterReservations);\n\n    const loading = state.loading || postState.loading || patchState.loading;\n\n    const adminEdit = reservation && user.admin && reservation?.userId !== user.userId;\n    const canEdit = user.admin || !reservation || reservation.userId === user.userId;\n\n    const newReservations = useMemo(() => reservations?.filter(\n        r => !groupReservations.some(gr => gr.from.isSame(r.from, 'hour') && gr.to.isSame(r.to, 'hour'))\n    ), [reservations, groupReservations]);\n    const cancelReservations = useMemo(() => reservations && groupReservations.filter(\n        gr => !reservations.some(r => r.from.isSame(gr.from, 'hour') && r.to.isSame(gr.to, 'hour'))\n    ), [reservations, groupReservations]);\n    const changeText = !!(groupReservations && text);\n\n    const unavailableReservations = useMemo(() => {\n        let uaRes = postState.error?.unavailableReservations || patchState.error?.unavailableReservations;\n        if (uaRes)\n            uaRes = uaRes.map(({ courtId, from, to }) => ({\n                courtId,\n                from: dayjs(from),\n                to: dayjs(to),\n            }));\n        return uaRes;\n    }, [patchState.error?.unavailableReservations, postState.error?.unavailableReservations]);\n\n    useEffect(() => {\n        if (reservation?.groupId)\n            getGroupReservations({ query: { 'group-id': reservation?.groupId } });\n    }, [reservation, getGroupReservations]);\n\n    const handleChangeChangeReason = useCallback(e => {\n        setChangeReason(e.target.value);\n    }, []);\n\n    const handlePostReservation = useCallback(() => {\n        const doPost = () => {\n            postReservationGroup(null, {\n                reservations,\n                text,\n                type: RESERVATION_TYPES.NORMAL,\n            }, () => {\n                message.success(\"Reservierung erfolgreich\");\n                onFinish();\n            });\n        };\n\n        Modal.confirm({\n            icon: false,\n            okText: 'Akzeptieren',\n            width: 530,\n            centered: true,\n            content: (\n                <div dangerouslySetInnerHTML={{ __html: reservationTos.body }} />\n            ),\n            onOk: doPost,\n        });\n    }, [\n        onFinish,\n        postReservationGroup,\n        reservations,\n        reservationTos,\n        text,\n    ]);\n\n    const handleChangeReservation = useCallback(() => {\n        const doChange = () => {\n            patchReservationGroup({\n                path: {\n                    groupId: reservation.groupId\n                }\n            }, {\n                reason: adminEdit ? changeReason : undefined,\n                reservations,\n                text,\n            }, () => {\n                message.success(\"Speichern erfolgreich\");\n                onFinish();\n            });\n        };\n\n        Modal.confirm({\n            title: 'Wirklich speichern?',\n            icon: <ExclamationCircleOutlined />,\n            centered: true,\n            content: (\n                <div className={styles.wrapper}>\n\n                    {newReservations.length > 0 &&\n                        <>\n                            <div className={styles.heading}>Neue Termine</div>\n                            <ul>\n                                {newReservations.map(({ courtId, from, to }) => (\n                                    <li key={from}>{from.format('dd[\\xa0]L')}, {from.hour()}&nbsp;bis&nbsp;{to.hour()}&nbsp;Uhr, {getCourtName(courts, courtId)}</li>\n                                ))}\n                            </ul>\n                        </>\n                    }\n\n                    {cancelReservations.length > 0 &&\n                        <>\n                            <div className={styles.heading}>Zu Stornieren</div>\n                            <ul>\n                                {cancelReservations.map(({ courtId, from, to }) => (\n                                    <li key={from}>{from.format('dd[\\xa0]L')}, {from.hour()}&nbsp;bis&nbsp;{to.hour()}&nbsp;Uhr, {getCourtName(courts, courtId)}</li>\n                                ))}\n                            </ul>\n                        </>\n                    }\n\n                    {changeText &&\n                        <>\n                            <div className={styles.heading}>Änderungen</div>\n                            <ul>\n                                <li>Name: <strong>{text}</strong></li>\n                            </ul>\n                        </>\n                    }\n\n                </div>\n            ),\n            okText: 'Bestätigen',\n            okType: 'danger',\n            cancelText: 'Abbrechen',\n            onOk: doChange\n        });\n    }, [\n        adminEdit,\n        cancelReservations,\n        changeReason,\n        changeText,\n        courts,\n        newReservations,\n        onFinish,\n        patchReservationGroup,\n        reservation,\n        reservations,\n        text,\n    ]);\n\n\n    const handleCancelReservation = useCallback(() => {\n        let cancelType = 'single';\n\n        const handleCancelTypeChange = e => (cancelType = e.target.value);\n\n        const doDelete = () => {\n            const reqParams = {\n                path: {\n                    groupId: reservation.groupId\n                }\n            };\n            const cb = () => {\n                message.success(\"Stornierung erfolgreich\");\n                onFinish();\n            }\n\n            let reservations;\n            if (cancelType === 'single') {\n                reservations = groupReservations.filter(r => !r.from.isSame(reservation.from, 'day'));\n            } else if (cancelType === 'allActive') {\n                reservations = groupReservations.filter(r => r.from.isBefore(dayjs(), 'hour'));\n            } else {\n                reservations = [];\n            }\n\n            patchReservationGroup(reqParams, {\n                reason: adminEdit ? changeReason : undefined,\n                reservations,\n            }, cb);\n        };\n\n        if (groupReservations.length <= 1) {\n            doDelete();\n        } else {\n            Modal.confirm({\n                title: 'Termine stornieren',\n                icon: <ExclamationCircleOutlined />,\n                centered: true,\n                content: (\n                    <Radio.Group \n                        className={styles.cancelRadioGroup}\n                        onChange={handleCancelTypeChange}\n                        defaultValue={cancelType}\n                    >\n                        <Radio value=\"single\">Nur diesen Termin</Radio>\n                        <ul>\n                            <li key={reservation.from}>{reservation.from.format('dd[\\xa0]L')}, {reservation.from.hour()}&nbsp;bis&nbsp;{reservation.to.hour()}&nbsp;Uhr, {getCourtName(courts, reservation.courtId)}</li>\n                        </ul>\n                        <Radio value=\"allActive\">Alle offenen Termine</Radio>\n                        <ul>\n                            {groupReservations.filter(r => !r.from.isBefore(dayjs(), 'hour')).map(({ courtId, from, to }) => (\n                                <li key={from}>{from.format('dd[\\xa0]L')}, {from.hour()}&nbsp;bis&nbsp;{to.hour()}&nbsp;Uhr, {getCourtName(courts, courtId)}</li>\n                            ))}\n                        </ul>\n                        {user?.admin &&\n                            <>\n                                <Radio value=\"all\">Alle Termine</Radio>\n                                <ul>\n                                    {groupReservations.map(({ courtId, from, to }) => (\n                                        <li key={from}>{from.format('dd[\\xa0]L')}, {from.hour()}&nbsp;bis&nbsp;{to.hour()}&nbsp;Uhr, {getCourtName(courts, courtId)}</li>\n                                    ))}\n                                </ul>\n                            </>\n                        }\n                    </Radio.Group>\n                ),\n                okText: 'Stornieren',\n                okType: 'danger',\n                cancelText: 'Abbrechen',\n                onOk: doDelete,\n            });\n        }\n    }, [\n        adminEdit,\n        changeReason,\n        courts,\n        groupReservations,\n        onFinish,\n        patchReservationGroup,\n        reservation,\n        user?.admin,\n    ]);\n\n    useEffect(() => {\n        if (prevErrorRef.current.post === postState.error\n            && prevErrorRef.current.patch === patchState.error)\n            return;\n        prevErrorRef.current.post = postState.error;\n        prevErrorRef.current.patch = patchState.error;\n\n        const message = postState.error?.message || patchState.error?.message;\n        if (unavailableReservations) {\n            Modal.error({\n                centered: true,\n                title: 'Reservierung fehlgeschlagen',\n                content: (\n                    <div>\n                        <div>\n                            Folgende Termine sind nicht verfügbar:\n                        </div>\n                        <ul>\n                            {unavailableReservations.map(({ courtId, from, to }) => (\n                                <li key={from}>{from.format('dd[\\xa0]L')}, {from.hour()}&nbsp;bis&nbsp;{to.hour()}&nbsp;Uhr, {getCourtName(courts, courtId)}</li>\n                            ))}\n                        </ul>\n                    </div>\n                )\n            });\n        } else if (message === 'too many active reservations') {\n            const value = postState.error?.value || patchState.error?.value;\n            const max = postState.error?.max || patchState.error?.max;\n            const diff = Math.abs(value - max);\n            Modal.error({\n                centered: true,\n                title: 'Reservierungslimit erreicht',\n                content: (\n                    <div>\n                        {reservations?.length > diff ?\n                            (\n                                <p>\n                                    Bitte entfernen Sie mindestens <strong>{diff}</strong> Termine.\n                                </p>\n                            ) : (\n                                <p>\n                                    Sie können aktuell keine weiteren Termine reservieren.\n                                </p>\n                            )\n                        }\n                        <p>\n                            Es können maximal {max} Reservierungen im voraus getätigt werden. Bereits vergangene Termine werden dabei nicht angerechnet.\n                        </p>\n                    </div>\n                )\n            });\n        }\n    }, [courts, reservations?.length, postState.error, patchState.error, unavailableReservations])\n\n    if (\n        state.error\n        || (postState.error && !postState.error.unavailableReservations && postState.error.message !== 'too many active reservations')\n        || (patchState.error && !patchState.error.unavailableReservations && patchState.error.message !== 'too many active reservations')\n    ) {\n        return (\n            <Modal\n                title=\"Reservierung\"\n                visible={true}\n                centered\n                onCancel={onFinish}\n                onOk={onFinish}\n                footer={\n                    <div className={styles.footer}>\n                        <Button onClick={onFinish}>\n                            Abbrechen\n                        </Button>\n                    </div>\n                }\n            >\n                <div className={styles.wrapper}>\n                    <ErrorResult />\n                </div>\n            </Modal>\n        );\n    }\n\n    return (\n        <Modal\n            visible={true}\n            width={530}\n            centered\n            onCancel={onFinish}\n            onOk={onFinish}\n            footer={loading ?\n                (\n                    <StatusText\n                        loading\n                        text=\"Bitte warten...\"\n                    />\n                ) : (\n                    <div className={styles.footer}>\n                        <Button onClick={onFinish}>\n                            {canEdit ? 'Abbrechen' : 'Schließen'}\n                        </Button>\n                        {canEdit && (reservation ?\n                            (\n                                <>\n                                    <Button\n                                        type=\"danger\"\n                                        onClick={handleCancelReservation}\n                                        disabled={adminEdit && !changeReason}\n                                    >\n                                        Stornieren\n                                    </Button>\n                                    <Button\n                                        type=\"primary\"\n                                        onClick={handleChangeReservation}\n                                        disabled={\n                                            !(newReservations?.length || cancelReservations?.length || changeText)\n                                            || (adminEdit && !changeReason)\n                                        }\n                                    >\n                                        Speichern\n                                    </Button>\n                                </>\n                            ) : (\n                                <Button\n                                    disabled={!newReservations?.length}\n                                    type=\"primary\"\n                                    onClick={handlePostReservation}\n                                >\n                                    Reservieren\n                                </Button>\n                            )\n                        )}\n                    </div>\n                )\n            }\n        >\n            <div className={styles.wrapper}>\n                {state.loading ?\n                    (\n                        <Ball visible spin centered large />\n                    ) : (\n\n                        <ReservationDetailsForm\n                            courtId={courtId}\n                            currentReservations={groupReservations}\n                            disabled={loading}\n                            from={from}\n                            onCourtIdChange={setCourtId}\n                            onFromChange={setFrom}\n                            onReservationsChange={setReservations}\n                            onTextChange={setText}\n                            onToChange={setTo}\n                            readOnly={!canEdit}\n                            text={text}\n                            to={to}\n                            unavailableReservations={unavailableReservations}\n                        />\n                    )\n                }\n\n                {adminEdit &&\n                    <Form layout=\"vertical\">\n                        <Form.Item \n                            label=\"Grund der Änderung\"\n                            required\n                        >\n                            <Input.TextArea\n                                autoSize\n                                disabled={loading}\n                                onChange={handleChangeChangeReason}\n                                placeholder=\"Erforderlich\"\n                                required\n                                value={changeReason}\n                            />\n                            <div className={styles.changeReasonHint}>\n                                Der Inhaber der Reservierung wird über die Änderungen sowie dessen Grund per E-Mail informiert.\n                            </div>\n                        </Form.Item>\n                    </Form>\n                }\n            </div>\n        </Modal>\n    );\n}","import { Button, Modal, Result } from 'antd';\nimport React, { useCallback, useContext } from 'react';\n\nimport { authContext } from '../AuthContext';\nimport styles from './VerifyMailModal.module.css';\nimport { useHistory } from 'react-router-dom';\n\nexport function VerifyMailModal({\n    onClose\n}) {\n    const { user } = useContext(authContext);\n    const history = useHistory();\n\n    const handleChangeMailClick = useCallback(() => {\n        history.push('/profile');\n    }, [history]);\n    \n    const handleResendMail = useCallback(() => {\n        history.push('/verify-mail/send');\n    }, [history]);\n\n    return (\n        <Modal\n            title=\"E-Mail nicht verifiziert\"\n            visible={true}\n            centered\n            width={580}\n            onCancel={onClose}\n            onOk={onClose}\n            footer={null}\n        >\n            <Result\n                status=\"warning\"\n                title=\"Bitte bestätigen Sie Ihre E-Mail Adresse\"\n                extra={\n                    <div>\n                        <div>\n                            Klicken Sie auf den Bestätigungslink, den Sie bei Ihrer Registrierung an <strong>{user?.mail}</strong> erhalten haben.\n                        </div>\n                        <div className={styles.buttons}>\n                            <Button type=\"primary\" onClick={handleResendMail}>\n                                Bestätigungslink erneut senden\n                            </Button>\n                            <Button type=\"link\" onClick={handleChangeMailClick}>\n                                E-Mail Adresse ändern\n                            </Button>\n                        </div>\n                    </div>\n                }\n            />\n        </Modal>\n    );\n}","import React, { useContext } from 'react';\n\nimport { DisableReservationGroupModal } from './DisableReservationGroupModal';\nimport { LoginModal } from '../user/LoginModal';\nimport { RESERVATION_TYPES } from '../ReservationTypes';\nimport { ReservationGroupModal } from './ReservationGroupModal';\nimport { VerifyMailModal } from '../user/VerifyMailModal';\nimport { authContext } from '../AuthContext';\n\nexport function ReservationModal(props) {\n    \n    const { user } = useContext(authContext);\n    const { onFinish, reservation, type } = props;\n\n    if (!user)\n        return <LoginModal onClose={onFinish} />\n\n    if (!user.verified)\n        return <VerifyMailModal onClose={onFinish} />\n\n    if (reservation?.type === RESERVATION_TYPES.DISABLE || type === RESERVATION_TYPES.DISABLE)\n        return <DisableReservationGroupModal {...props} />;\n\n    return <ReservationGroupModal {...props} />;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cell\":\"SlotCell_cell__10BAl\",\"enabled\":\"SlotCell_enabled__3WkTf\",\"alwaysClickable\":\"SlotCell_alwaysClickable__9sej8\",\"slot\":\"SlotCell_slot__2KRoY\",\"text\":\"SlotCell_text__1xoLV\",\"singleLine\":\"SlotCell_singleLine__22a8x\",\"reserved\":\"SlotCell_reserved__1oREX\",\"mine\":\"SlotCell_mine__Fe5AN\",\"loading\":\"SlotCell_loading__19J7J\",\"load\":\"SlotCell_load__YLQlz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"DayTable_wrapper__1Hl5M\",\"cols\":\"DayTable_cols__3g9Sf\",\"date\":\"DayTable_date__3HnYm\",\"today\":\"DayTable_today__3s1dj\",\"court\":\"DayTable_court__3mDRl\",\"body\":\"DayTable_body__27nsw\",\"blur\":\"DayTable_blur__1Rzxw\",\"infoOverlay\":\"DayTable_infoOverlay__2JlXg\",\"linkButton\":\"DayTable_linkButton__3jjgW\",\"adminAction\":\"DayTable_adminAction__3kbRX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"HoursTable_wrapper__1o48U\",\"hour\":\"HoursTable_hour__2iAsO\",\"to\":\"HoursTable_to__U0x1y\",\"highlight\":\"HoursTable_highlight__16BlN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ReservationCalendar_wrapper__r-AWI\",\"tableWrapper\":\"ReservationCalendar_tableWrapper__Zzm8d\",\"tableScroller\":\"ReservationCalendar_tableScroller__1fVFR\"};","import React, { useCallback, useContext } from 'react';\n\nimport { RESERVATION_TYPES } from '../ReservationTypes';\nimport { authContext } from '../AuthContext';\nimport classNames from 'classnames/bind';\nimport styles from './SlotCell.module.css';\n\nconst cn = classNames.bind(styles);\n\nconst SLOT_HEIGHT_PX = 32;\nconst CELL_PADDING_PX = 3;\n\nexport function SlotCell({\n    alwaysClickable = false,\n    courtId,\n    courtName,\n    date,\n    disabled = false,\n    hours,\n    loading = false,\n    onClick,\n    reservation,\n}) {\n    const { user } = useContext(authContext);\n\n    const handleClick = useCallback(() => {\n        if (alwaysClickable || (!disabled && reservation?.type !== RESERVATION_TYPES.DISABLE))\n            onClick({ courtId, date, reservation });\n    }, [alwaysClickable, courtId, date, disabled, onClick, reservation]);\n\n    let rowSpan = 1;\n    if (reservation) {\n        if (reservation.from.isBefore(date, 'hour') && date.hour() !== hours[0]) {\n            rowSpan = 0;\n        } else {\n            const maxRowSpan = hours.length - hours.indexOf(date.hour());\n            rowSpan = Math.min(reservation.to.diff(date, 'hour'), maxRowSpan);\n        }\n    }\n\n    if (rowSpan === 0)\n        return null;\n\n    return (\n        <div\n            className={cn({\n                alwaysClickable,\n                cell: true,\n                enabled: !disabled && reservation?.type !== RESERVATION_TYPES.DISABLE,\n            })}\n            style={{ padding: CELL_PADDING_PX }}\n            rowSpan={rowSpan}\n            onClick={handleClick}\n        >\n            <div\n                className={cn({\n                    slot: true,\n                    loading,\n                    reserved: reservation?.type === RESERVATION_TYPES.NORMAL,\n                    mine: user && user?.userId === reservation?.userId,\n                })}\n                style={{ height: SLOT_HEIGHT_PX * rowSpan + CELL_PADDING_PX * 2 * (rowSpan - 1) }}\n                data-free-text=\"Frei\"\n                data-free-text-hover={`${date.hour()} Uhr, ${courtName}`}\n            >\n                <div className={cn({\n                    text: true,\n                    singleLine: rowSpan === 1,\n                })}>\n                    {reservation && (reservation.type === RESERVATION_TYPES.DISABLE ?\n                        (\n                            <>\n                                <div>Gesperrt</div>\n                                <div>{reservation.text}</div>\n                            </>\n                        ) : (\n                            <div>{reservation.text || reservation.name}</div>\n                        )\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n","import React, { useCallback, useContext, useEffect, useMemo, useState } from 'react';\n\nimport { Button } from 'antd';\nimport { SlotCell } from './SlotCell';\nimport { authContext } from '../AuthContext';\nimport classNames from 'classnames/bind';\nimport { findReservation } from '../helper';\nimport styles from './DayTable.module.css';\nimport { useTime } from './useTime';\n\nconst cn = classNames.bind(styles);\n\nexport function DayTable({\n    courts,\n    date,\n    hours,\n    loading,\n    onDisableCourtClick,\n    onSlotClick,\n    reservationDaysInAdvance,\n    reservations,\n}) {\n    const { user } = useContext(authContext);\n    const [disableOverlay, setDisableOverlay] = useState(false);\n    useEffect(() => setDisableOverlay(false), [user]);\n\n    const now = useTime('hour');\n\n    const isToday = useMemo(() => now.isSame(date, 'day'), [date, now]);\n    const tooFarAhead = useMemo(() =>\n        date.isAfter(now.add(reservationDaysInAdvance, 'day'), 'day'), [date, now, reservationDaysInAdvance]);\n    const reservableAsOf = useMemo(() => date.subtract(reservationDaysInAdvance, 'day').format('L'), [date, reservationDaysInAdvance]);\n\n    const showInfoOverlay = !disableOverlay && tooFarAhead;\n\n    const dates = useMemo(() => hours.map(h => date.hour(h)), [date, hours]);\n\n    const handleDisableOverlayClick = useCallback(() => setDisableOverlay(true), []);\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.date}>\n                {isToday && <span className={styles.today}>Heute</span>}\n                {date.format('dd[\\xa0]L')}\n            </div>\n\n            <div className={styles.cols}>\n                {courts.map(({ courtId, name }) => (\n                    <div key={courtId} className={styles.court}>\n                        {name}\n                    </div>\n                ))}\n            </div>\n\n            <div className={cn('body', 'cols')}>\n                {courts.map(({ courtId, name }) => (\n                    <div \n                        key={courtId} \n                        className={cn({ blur: showInfoOverlay })}\n                    >\n                        {dates.map(date => (\n                            <SlotCell\n                                alwaysClickable={user?.admin}\n                                courtId={courtId}\n                                courtName={name}\n                                date={date}\n                                disabled={date.isBefore(now, 'hour')}\n                                hours={hours}\n                                key={date}\n                                loading={loading}\n                                onClick={onSlotClick}\n                                reservation={findReservation(reservations, date, courtId)}\n                            />\n                        ))}\n                        {user?.admin &&\n                            <div className={styles.adminAction}>\n                                <Button\n                                    type=\"link\"\n                                    onClick={() => onDisableCourtClick({ courtId, date })}\n                                >\n                                    Sperren\n                                </Button>\n                            </div>\n                        }\n                    </div>\n                ))}\n\n                {showInfoOverlay &&\n                    <div className={styles.infoOverlay}>\n                        <div>Reservierbar<br />ab {reservableAsOf}</div>\n                        {user?.admin &&\n                            <Button\n                                className={styles.linkButton}\n                                type=\"link\"\n                                onClick={handleDisableOverlayClick}\n                            >\n                                Trotzdem reservieren<br />(Trainer/Admin)\n                            </Button>\n                        }\n                    </div>\n                }\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './HoursTable.module.css';\nimport { useTime } from './useTime';\n\nconst cn = classNames.bind(styles);\n\nexport function HoursTable({\n    hours,\n    highlightHour,\n}) {\n    const now = useTime('hour');\n\n    return (\n        <div className={styles.wrapper}>\n            {hours.map(hour => (\n                <div \n                    key={hour} \n                    className={cn({ \n                        hour: true,\n                        highlight: highlightHour && now.hour() === hour\n                    })}\n                >\n                    {hour} Uhr<br />\n                    <span className={styles.to}>bis {(hour + 1) % 24} Uhr</span>\n                </div>\n            ))}\n        </div>\n    );\n}","import React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { DayTable } from './DayTable';\nimport { ErrorResult } from '../ErrorResult';\nimport { HoursTable } from './HoursTable';\nimport { RESERVATION_TYPES } from '../ReservationTypes';\nimport { ReservationModal } from './ReservationModal';\nimport { UPDATE_INTERVALS_SEC } from '../updateIntervals';\nimport { appContext } from '../AppContext';\nimport { getReservationsApi } from '../api';\nimport styles from './ReservationCalendar.module.css';\nimport { useApi } from '../useApi';\nimport { useTime } from './useTime';\nimport { useUpdateEffect } from '../useUpdateEffect';\nimport { visibleHoursToHoursArray } from '../helper';\n\nconst VISIBLE_DATES_COUNT = 7; // week\n\nexport function ReservationCalendar({\n    kiosk = false,\n    selectedDate,\n}) {\n    const { courts, config: { visibleHours, reservationDaysInAdvance } } = useContext(appContext);\n\n    const today = useTime('day');\n\n    const [selectedSlot, setSelectedSlot] = useState();\n    const scrollerRef = useRef();\n\n    const [reservations, setReservations] = useState(null);\n    const [state, getReservations] = useApi(getReservationsApi, setReservations); \n\n    const updateReservations = useCallback(() => getReservations({\n        query: {\n            start: selectedDate.startOf('week').toISOString(),\n            end: selectedDate.endOf('week').toISOString(),\n        }\n    }), [selectedDate, getReservations]);\n\n    useUpdateEffect(updateReservations, UPDATE_INTERVALS_SEC.RESERVATIONS);\n\n    useEffect(() => {\n        setReservations(null);\n        updateReservations();\n    }, [updateReservations]);\n\n    const hours = useMemo(() => visibleHoursToHoursArray(visibleHours), [visibleHours]);\n\n    const visibleDates = useMemo(() => Array.from(Array(VISIBLE_DATES_COUNT)).map((_, i) =>\n        selectedDate.startOf('week').add(i, 'day') // startOf also sets hours, mins, secs to zero\n    ), [selectedDate]);\n\n    // scroll automatically to today's date\n    useEffect(() => {\n        if (!scrollerRef.current)\n            return;\n        if (selectedDate.isSame(today, 'week')) {\n            const index = Math.abs(today.startOf('week').diff(today, 'day'));\n            requestAnimationFrame(() => {\n                scrollerRef.current.scrollLeft\n                    = ((scrollerRef.current.scrollWidth) / VISIBLE_DATES_COUNT) * index;\n            });\n        } else {\n            requestAnimationFrame(() => {\n                scrollerRef.current.scrollLeft = 0;\n            });\n        }\n    }, [selectedDate, today]);\n\n    const handleSlotClicked = useCallback(selectedSlot => {\n        if (!kiosk)\n            setSelectedSlot(selectedSlot);\n    }, [kiosk]);\n\n    const handleDisableCourtClicked = useCallback(selectedSlot => {\n        setSelectedSlot({ \n            ...selectedSlot,\n            type: RESERVATION_TYPES.DISABLE,\n        });\n    }, []);\n\n    const handleReservationFinish = useCallback(() => {\n        setSelectedSlot(null);\n    }, []);\n\n    if (state.error)\n        return (\n            <div className={styles.tableWrapper}>\n                <ErrorResult />\n            </div>\n        );\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.tableWrapper}>\n                <HoursTable\n                    hours={hours}\n                    highlightHour={selectedDate.isSame(today, 'week')}\n                />\n\n                <div className={styles.tableScroller} ref={scrollerRef}>\n                    {visibleDates.map(date => (\n                        <DayTable\n                            courts={courts}\n                            date={date}\n                            hours={hours}\n                            key={date}\n                            loading={!reservations}\n                            onDisableCourtClick={handleDisableCourtClicked}\n                            onSlotClick={handleSlotClicked}\n                            reservationDaysInAdvance={reservationDaysInAdvance}\n                            reservations={reservations}\n                        />\n                    ))}\n                </div>\n            </div>\n\n            {selectedSlot &&\n                <ReservationModal\n                    initialFrom={selectedSlot?.date}\n                    initialCourtId={selectedSlot?.courtId}\n                    reservation={selectedSlot?.reservation}\n                    type={selectedSlot?.type}\n                    onFinish={handleReservationFinish}\n                    setReservations={setReservations}\n                />\n            }\n        </div>\n    );\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"WeekPicker_wrapper__gW-q4\",\"middlePicker\":\"WeekPicker_middlePicker__1K4lw\",\"outerThisWeekButton\":\"WeekPicker_outerThisWeekButton__3-TVK\",\"picker\":\"WeekPicker_picker__1eBe4\",\"leftButton\":\"WeekPicker_leftButton__2mGJ3\",\"rightButton\":\"WeekPicker_rightButton__1yWle\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CalendarPage_wrapper__29en7\",\"alert\":\"CalendarPage_alert__3_59q\"};","// This icon file is generated automatically.\nvar LeftOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z\" } }] }, \"name\": \"left\", \"theme\": \"outlined\" };\nexport default LeftOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport LeftOutlinedSvg from \"@ant-design/icons-svg/es/asn/LeftOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar LeftOutlined = function LeftOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: LeftOutlinedSvg\n  }));\n};\n\nLeftOutlined.displayName = 'LeftOutlined';\nexport default React.forwardRef(LeftOutlined);","// This icon file is generated automatically.\nvar RightOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z\" } }] }, \"name\": \"right\", \"theme\": \"outlined\" };\nexport default RightOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport RightOutlinedSvg from \"@ant-design/icons-svg/es/asn/RightOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar RightOutlined = function RightOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: RightOutlinedSvg\n  }));\n};\n\nRightOutlined.displayName = 'RightOutlined';\nexport default React.forwardRef(RightOutlined);","import { LeftOutlined, RightOutlined } from '@ant-design/icons';\nimport React, { useCallback, useState } from 'react';\n\nimport Button from 'antd/es/button';\nimport { DatePicker } from './DatePicker';\nimport dayjs from 'dayjs';\nimport styles from './WeekPicker.module.css';\n\nexport function WeekPicker({\n    date,\n    onChange,\n}) {\n    const [open, setOpen] = useState(false);\n\n    const handleClick = useCallback(() => {\n        setOpen(true);\n    }, []);\n\n    const handlePreviousButtonClick = useCallback(e => {\n        onChange(date.subtract(7, 'days'));\n        setOpen(false);\n    }, [date, onChange]);\n\n    const handleNextButtonClick = useCallback(e => {\n        onChange(date.add(7, 'days'));\n        setOpen(false);\n    }, [date, onChange]);\n\n    const handleThisWeekButtonClick = useCallback(e => {\n        onChange(dayjs());\n        setOpen(false);\n    }, [onChange]);\n\n    const handleChange = useCallback(date => {\n        onChange(date);\n        setOpen(false);\n    }, [onChange]);\n\n    const handleOpenChange = useCallback(newOpen => {\n        setOpen(newOpen);\n    }, []);\n\n    return (\n        <div className={styles.wrapper}>\n\n            <div className={styles.middlePicker}>\n                <DatePicker\n                    className={styles.picker}\n                    picker=\"week\"\n                    open={open}\n                    inputReadOnly\n                    allowClear={false}\n                    bordered={true}\n                    value={date}\n                    onOpenChange={handleOpenChange}\n                    format={'[Kalenderwoche] w (YYYY)'}\n                    onClick={handleClick}\n                    onChange={handleChange}\n                    renderExtraFooter={() => \n                        <Button onClick={handleThisWeekButtonClick} type=\"link\">Diese Woche</Button>\n                    }\n                />\n\n                <Button \n                    className={styles.outerThisWeekButton}\n                    onClick={handleThisWeekButtonClick} \n                    type=\"link\"\n                >\n                    Zu Heute springen\n                </Button>\n            </div>\n\n            <Button \n                className={styles.leftButton} \n                onClick={handlePreviousButtonClick}\n            >\n                <LeftOutlined />\n                Vorherige Woche\n            </Button>\n\n            <Button \n                className={styles.rightButton} \n                onClick={handleNextButtonClick}\n            >\n                Nächste Woche\n                <RightOutlined />\n            </Button>\n\n        </div>\n    );\n}","import React, { useCallback, useState } from 'react';\n\nimport { ReservationCalendar } from './ReservationCalendar';\nimport { WeekPicker } from './WeekPicker';\nimport styles from './CalendarPage.module.css';\nimport { useTime } from './useTime';\n\nexport function CalendarPage() {\n\n    const today = useTime('day');\n    const [selectedDate, setSelectedDate] = useState(null);\n\n    const handleWeekChange = useCallback(date => {\n        setSelectedDate(date);\n    }, []);\n\n    return (\n        <div className={styles.wrapper}>\n            <WeekPicker\n                date={selectedDate || today}\n                onChange={handleWeekChange}\n            />\n\n            <ReservationCalendar\n                selectedDate={selectedDate || today}\n            />\n        </div>\n    );\n}"],"sourceRoot":""}