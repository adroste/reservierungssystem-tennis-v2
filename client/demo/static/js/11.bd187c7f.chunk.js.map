{"version":3,"sources":["user/LoginForm.js","user/LoginForm.module.css","helper.js","calendar/ReservationDetails.js","calendar/GroupDatesForm.module.css","calendar/ReservationDetails.module.css","calendar/ReservationModalInner.module.css","user/VerifyMailModal.module.css","calendar/useTime.js","user/LoginModal.js","calendar/GroupDatesForm.js","calendar/ReservationModalInner.js","user/VerifyMailModal.js","calendar/ReservationModal.js","calendar/SlotCell.module.css","calendar/DayTable.module.css","calendar/HoursTable.module.css","calendar/ReservationCalendar.module.css","calendar/SlotCell.js","calendar/DayTable.js","calendar/HoursTable.js","calendar/ReservationCalendar.js","kiosk/DateClock.module.css","kiosk/SystemLinkQr.module.css","kiosk/KioskPage.module.css","kiosk/DateClock.js","kiosk/SystemLinkQr.js","kiosk/KioskPage.js"],"names":["LoginForm","useContext","authContext","autoLoginState","setUser","setRememberLogin","useApi","postLoginApi","loginState","login","loading","valStatus","error","undefined","onFinish","useCallback","mail","password","rememberLogin","type","layout","Item","message","name","rules","required","validateStatus","autoComplete","prefix","style","color","placeholder","disabled","Password","valuePropName","noStyle","className","styles","forgotLink","to","htmlType","loginButton","text","registerItem","module","exports","findReservation","reservations","date","courtId","r","isSame","parseQuery","queryString","query","pairs","substr","split","i","length","pair","decodeURIComponent","formatVal","ReservationDetails","courtName","groupDates","repeat","showAllDates","showDateRange","showFollowUpDate","dateStr","format","pastGroupEventsCount","useMemo","today","dayjs","reduce","count","isBefore","futureGroupEvents","filter","followUpReservation","sorted","sort","a","b","find","gd","isAfter","wrapper","item","add","allDates","dateList","map","d","useTime","unit","useState","time","setTime","useEffect","interval","setInterval","newTime","clearInterval","LoginModal","onClose","title","visible","width","centered","onCancel","onOk","footer","cn","classNames","bind","defaultRepeatValuesMap","1","7","14","GroupDatesForm","currentGroupDates","defaultAddCount","onGroupDatesChange","repeatValuesMap","unavailableDates","user","appContext","courts","reservationDaysInAdvance","config","repeatValue","setRepeatValue","visibleDates","setVisibleDates","selectedDates","_setSelectedDates","courtDisabledFromTil","c","disabledFromTil","checkIfTooFarAhead","checkIfNotAvailable","isBetween","some","dates","checked","findIndex","reserved","past","notAvailable","tooFarAhead","setSelectedDates","_selectedDates","s","valueOf","Number","MAX_SAFE_INTEGER","diff","Math","min","abs","toString","allowedValues","Object","keys","includes","first","last","push","addDate","removeDate","slice","handleRepeatValueChange","e","newRepeatValue","target","value","newDates","handleCheckedChange","index","newSelection","Group","repeatTypes","onChange","buttonStyle","size","Button","unchecked","danger","admin","extra","buttons","icon","PlusOutlined","onClick","MinusOutlined","ReservationModalInner","reservation","setReservations","templates","reservationPrice","reservationTos","changeReason","setChangeReason","tosAccepted","setTosAccepted","newCustomName","setNewCustomName","newGroupDates","setNewGroupDates","editName","setEditName","prevErrorRef","useRef","groupReservations","setGroupReservations","getReservationsApi","state","getGroupReservations","postReservationGroupApi","postState","postReservationGroup","deleteReservationGroupApi","deleteState","deleteReservationGroup","patchReservationGroupApi","patchState","patchReservationGroup","adminEdit","userId","canEdit","ngd","cancelDates","changeCustomName","groupId","handleGroupDatesChange","handleAcceptTos","handleEditName","handleCancelEditName","handleNewCustomNameChange","handleChangeChangeReason","handlePostReservation","customName","success","handleChangeReservation","Modal","confirm","ExclamationCircleOutlined","content","heading","okText","okType","cancelText","path","reason","handleCancelReservation","doDelete","reqParams","cb","current","post","patch","uaDates","max","ErrorResult","StatusText","body","nameInput","dangerouslySetInnerHTML","__html","TextArea","autoSize","changeReasonHint","VerifyMailModal","history","useHistory","handleChangeMailClick","handleResendMail","status","ReservationModal","props","verified","SlotCell","disabledText","hour","handleClick","cell","enabled","slot","data-free-text","data-free-text-hover","DayTable","hours","onSlotClick","isToday","inPast","courtsToday","manuallyDisabled","colSpan","court","HoursTable","highlightHour","hoursTableWrapper","hoursTable","highlight","til","ReservationCalendar","kiosk","selectedDate","visibleHours","selectedSlot","setSelectedSlot","initialScrollDoneRef","scrollerRef","getReservations","updateReservations","start","startOf","toISOString","end","endOf","useUpdateEffect","UPDATE_INTERVALS_SEC","RESERVATIONS","parseInt","Array","from","_","requestAnimationFrame","scrollLeft","scrollWidth","handleSlotClicked","handleReservationFinish","tableWrapper","tableScroller","ref","DateClock","dateTime","setDateTime","int","clockDots","SystemLinkQr","bgColor","url","qr","plain","replace","KioskPage","announcement","orgName","search","useLocation","params","updateInterval","console","BASE_DATA","setDefaultUpdateIntervals","top","subTitle","linkQr","alert","showIcon","disabledReason"],"mappings":"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","file":"static/js/11.bd187c7f.chunk.js","sourcesContent":["import { Alert, Button, Checkbox, Form, Input } from 'antd';\nimport { LockOutlined, MailOutlined } from '@ant-design/icons';\nimport React, { useCallback, useContext } from 'react';\n\nimport { Link } from 'react-router-dom';\nimport { StatusText } from '../admin/StatusText';\nimport { authContext } from '../AuthContext';\nimport { postLoginApi } from '../api';\nimport styles from './LoginForm.module.css';\nimport { useApi } from '../useApi';\n\nexport function LoginForm() {\n\n    const { autoLoginState, setUser, setRememberLogin } = useContext(authContext);\n    const [loginState, login] = useApi(postLoginApi, setUser);\n\n    const loading = loginState.loading || autoLoginState.loading;\n    const valStatus = loginState.error ? 'error' : undefined;\n\n    const onFinish = useCallback(({ mail, password, rememberLogin }) => {\n        setRememberLogin(rememberLogin);\n        login(null, {\n            type: 'plain',\n            mail,\n            password,\n        });\n    }, [login, setRememberLogin]);\n\n    return (\n        <Form\n            layout=\"vertical\"\n            onFinish={onFinish}\n        >\n            {loginState.error &&\n                <Form.Item>\n                    <Alert\n                        type=\"error\"\n                        message=\"Login fehlgeschlagen.\"\n                    />\n                </Form.Item>\n            }\n\n            <Form.Item\n                name=\"mail\"\n                rules={[{ required: true, message: 'E-Mail Adresse ist erforderlich' }]}\n                validateStatus={valStatus}\n            >\n                <Input\n                    autoComplete=\"email\"\n                    prefix={<MailOutlined style={{ color: '#aaa' }} />}\n                    placeholder=\"E-Mail\"\n                    disabled={loading}\n                />\n            </Form.Item>\n\n            <Form.Item\n                name=\"password\"\n                rules={[{ required: true, message: 'Passwort ist erforderlich' }]}\n                validateStatus={valStatus}\n            >\n                <Input.Password\n                    autoComplete=\"current-password\"\n                    prefix={<LockOutlined style={{ color: '#aaa' }} />}\n                    placeholder=\"Passwort\"\n                    disabled={loading}\n                />\n            </Form.Item>\n\n            <Form.Item>\n                <Form.Item name=\"rememberLogin\" valuePropName=\"checked\" noStyle>\n                    <Checkbox\n                        disabled={loading}\n                    >\n                        Angemeldet bleiben\n                    </Checkbox>\n                </Form.Item>\n\n                {/* TODO */}\n                <Link className={styles.forgotLink} to=\"/reset-password\">\n                    Password vergessen\n                </Link>\n            </Form.Item>\n\n            <Form.Item>\n                <Button\n                    type=\"primary\"\n                    htmlType=\"submit\"\n                    className={styles.loginButton}\n                    disabled={loading}\n                >\n                    <StatusText\n                        loading={loading}\n                        text={loading ? 'Anmeldung...' : 'Anmelden'}\n                    />\n                </Button>\n            </Form.Item>\n\n\n            <Form.Item className={styles.registerItem}>\n                <span>oder </span>\n                <Link to=\"/register\">Kostenlos Registrieren</Link>\n            </Form.Item>\n        </Form>\n    );\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginButton\":\"LoginForm_loginButton__ECun6\",\"forgotLink\":\"LoginForm_forgotLink__3TG3V\",\"registerItem\":\"LoginForm_registerItem__32Qy-\"};","export function findReservation(reservations, date, courtId) {\n    if (!reservations)\n        return null;\n\n    for (let r of reservations)\n        if (date.isSame(r.date, 'hour') && courtId === r.courtId)\n            return r;\n    return null;\n}\n\nexport function parseQuery(queryString) {\n    const query = {};\n    const pairs = (queryString[0] === '?' ? queryString.substr(1) : queryString).split('&');\n    for (let i = 0; i < pairs.length; i++) {\n        const pair = pairs[i].split('=');\n        query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\n    }\n    return query;\n}","import { CalendarOutlined, ClockCircleOutlined, EnvironmentOutlined, RedoOutlined, UserOutlined } from '@ant-design/icons';\nimport React, { useMemo } from 'react';\n\nimport dayjs from 'dayjs';\nimport styles from './ReservationDetails.module.css';\n\nconst formatVal = 'dd[\\xa0]L';\n\nexport function ReservationDetails({\n    courtName,\n    date,\n    groupDates,\n    name,\n    repeat,\n    showAllDates = false,\n    showDateRange = false,\n    showFollowUpDate = false,\n}) {\n    let dateStr = date.format(formatVal);\n    if (showDateRange && groupDates) {\n        dateStr = groupDates.length ? groupDates[0].format(formatVal) : '-';\n        if (groupDates.length > 1)\n            dateStr += ` bis ${groupDates[groupDates.length - 1].format(formatVal)}`;\n    }\n\n    const pastGroupEventsCount = useMemo(() => {\n        const today = dayjs();\n        return groupDates?.reduce((count, date) => {\n            if (date.isBefore(today, 'day'))\n                return count + 1;\n            return count;\n        }, 0);\n    }, [groupDates]);\n\n    const futureGroupEvents = useMemo(() => {\n        const today = dayjs();\n        return groupDates?.filter(date => !date.isBefore(today, 'day'));\n    }, [groupDates]);\n\n    const followUpReservation = useMemo(() => {\n        const sorted = [...groupDates];\n        sorted.sort((a, b) => a - b);\n        return sorted?.find(gd => gd.isAfter(date, 'day'));\n    }, [groupDates, date]);\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.item}>\n                <div><CalendarOutlined /></div>\n                <div>{dateStr}</div>\n            </div>\n\n            <div className={styles.item}>\n                <div><ClockCircleOutlined /></div>\n                <div>{`${date.format('H')} bis ${date.add(1, 'h').format('H')} Uhr`}</div>\n            </div>\n\n            <div className={styles.item}>\n                <div><EnvironmentOutlined /></div>\n                <div>{courtName}</div>\n            </div>\n\n            {name &&\n                <div className={styles.item}>\n                    <div><UserOutlined /></div>\n                    <div>{name}</div>\n                </div>\n            }\n            \n            {repeat &&\n                <div className={styles.item}>\n                    <div><RedoOutlined /></div>\n                    <div>{repeat}</div>\n                </div>\n            }\n\n            {showAllDates && groupDates?.length &&\n                <div className={styles.item}>\n                    <div><RedoOutlined /></div>\n                    <div className={styles.allDates}>\n                        <span>Wiederkehrender Termin</span>\n                        <div className={styles.dateList}>\n                            {pastGroupEventsCount === 1 && <span>Ein vergangener Termin</span>}\n                            {pastGroupEventsCount > 1 && <span>{pastGroupEventsCount} vergangene Termine</span>}\n                            {futureGroupEvents?.map(d => <span key={d}>{d.format(formatVal)}</span>)}\n                        </div>\n                    </div>\n                </div>\n            }\n\n            {showFollowUpDate && followUpReservation &&\n                <div className={styles.item}>\n                    <div><RedoOutlined /></div>\n                    <div className={styles.allDates}>\n                        <span>Folgetermin</span>\n                        <div className={styles.dateList}>\n                            <span>{followUpReservation.format(formatVal)}</span>\n                        </div>\n                    </div>\n                </div>\n            }\n        </ div>\n    );\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"GroupDatesForm_wrapper__1y-OM\",\"repeatTypes\":\"GroupDatesForm_repeatTypes__1Gm6y\",\"dates\":\"GroupDatesForm_dates__3x0zy\",\"extra\":\"GroupDatesForm_extra__1E_ct\",\"danger\":\"GroupDatesForm_danger__3ndEw\",\"date\":\"GroupDatesForm_date__2ixOV\",\"unchecked\":\"GroupDatesForm_unchecked__uXvUe\",\"buttons\":\"GroupDatesForm_buttons__2ffBH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ReservationDetails_wrapper__3oaB0\",\"item\":\"ReservationDetails_item__3c9da\",\"allDates\":\"ReservationDetails_allDates__19arH\",\"dateList\":\"ReservationDetails_dateList__2q866\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ReservationModalInner_wrapper__3v8b-\",\"nameInput\":\"ReservationModalInner_nameInput__1X-ne\",\"footer\":\"ReservationModalInner_footer__3lctT\",\"heading\":\"ReservationModalInner_heading__-GhuQ\",\"changeReasonHint\":\"ReservationModalInner_changeReasonHint__2rx3T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"VerifyMailModal_buttons__2ZzQz\"};","import { useEffect, useState } from 'react';\n\nimport dayjs from 'dayjs';\n\nconst checkIntervalMs = 60000; // minute\n\nexport function useTime(unit) {\n    const [time, setTime] = useState(() => dayjs());\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            const newTime = dayjs();\n            if (!time.isSame(newTime, unit))\n                setTime(newTime);\n        }, checkIntervalMs);\n\n        return () => clearInterval(interval);\n    }, [time, unit]);\n\n    return time;\n}","import { LoginForm } from './LoginForm';\nimport { Modal } from 'antd';\nimport React from 'react';\n\nexport function LoginModal({\n    onClose\n}) {\n    return (\n        <Modal\n            title=\"Anmeldung erforderlich\"\n            visible={true}\n            width={400}\n            centered\n            onCancel={onClose}\n            onOk={onClose}\n            footer={null}\n        >\n            <LoginForm />\n        </Modal>\n    );\n}","import { Button, Checkbox, Radio } from 'antd';\nimport { MinusOutlined, PlusOutlined } from '@ant-design/icons';\nimport React, { useCallback, useContext, useEffect, useMemo, useState } from 'react';\n\nimport { appContext } from '../AppContext';\nimport { authContext } from '../AuthContext';\nimport classNames from 'classnames/bind';\nimport styles from './GroupDatesForm.module.css';\n\nconst cn = classNames.bind(styles);\n\nconst defaultRepeatValuesMap = {\n    1: 'Täglich',\n    7: 'Wöchentlich',\n    14: '2-Wöchentlich',\n};\n\nexport function GroupDatesForm({\n    courtId,\n    currentGroupDates,\n    date,\n    defaultAddCount = 2,\n    disabled = false,\n    onGroupDatesChange,\n    repeatValuesMap = defaultRepeatValuesMap,\n    today,\n    unavailableDates,\n}) {\n    const { user } = useContext(authContext);\n    const { courts, config: { reservationDaysInAdvance } } = useContext(appContext);\n\n    const [repeatValue, setRepeatValue] = useState(0);\n    const [visibleDates, setVisibleDates] = useState([]);\n    const [selectedDates, _setSelectedDates] = useState([]);\n\n    const courtDisabledFromTil = useMemo(() =>\n        (courts.find(c => c.courtId === courtId))?.disabledFromTil, [courts, courtId]);\n\n    const checkIfTooFarAhead = useCallback(date => (\n        date.isAfter(today.add(reservationDaysInAdvance, 'day'), 'day')\n    ), [today, reservationDaysInAdvance]);\n\n    const checkIfNotAvailable = useCallback(date => (\n        (courtDisabledFromTil && date.isBetween(courtDisabledFromTil[0], courtDisabledFromTil[1], 'day', '[]'))\n        || (unavailableDates && unavailableDates.some(d => date.isSame(d, 'day')))\n    ), [courtDisabledFromTil, unavailableDates]);\n\n    const dates = useMemo(() => {\n        return visibleDates.map(d => ({\n            date: d,\n            checked: selectedDates.findIndex(gd => gd.isSame(d, 'day')) !== -1,\n            reserved: currentGroupDates?.findIndex(gd => gd.isSame(d, 'day')) !== -1,\n            past: d.isBefore(today, 'day'),\n            notAvailable: checkIfNotAvailable(d),\n            tooFarAhead: checkIfTooFarAhead(d),\n        }));\n    }, [checkIfNotAvailable, selectedDates, currentGroupDates, visibleDates, today, checkIfTooFarAhead]);\n\n    const setSelectedDates = useCallback(selectedDates => {\n        _setSelectedDates(_selectedDates => {\n            let dates = selectedDates;\n            if (typeof selectedDates === 'function')\n                dates = selectedDates(_selectedDates);\n            return dates.filter(d => !checkIfNotAvailable(d));\n        });\n    }, [checkIfNotAvailable]);\n\n    useEffect(() => {\n        onGroupDatesChange(selectedDates);\n    }, [selectedDates, onGroupDatesChange]);\n\n    // automatically unchecks unavailable dates if unavailableDates changes\n    useEffect(() => setSelectedDates(s => s), [setSelectedDates]);\n\n    useEffect(() => {\n        let selectedDates = [date];\n        let visibleDates = [date];\n\n        if (currentGroupDates?.length > 1) {\n            selectedDates = [...currentGroupDates];\n            selectedDates.sort((a, b) => a.valueOf() - b.valueOf());\n            let repeatValue = Number.MAX_SAFE_INTEGER;\n\n            if (selectedDates.length > 1) {\n                for (let i = 1; i < selectedDates.length; ++i) {\n                    const diff = selectedDates[i - 1].diff(selectedDates[i], 'day');\n                    repeatValue = Math.min(repeatValue, Math.abs(diff));\n                }\n            }\n\n            repeatValue = repeatValue.toString();\n            const allowedValues = Object.keys(repeatValuesMap);\n            if (!allowedValues.includes(repeatValue))\n                repeatValue = allowedValues[0];\n            setRepeatValue(repeatValue);\n\n            const first = selectedDates[0];\n            const last = selectedDates[selectedDates.length - 1];\n            const count = Math.abs(first.diff(last, 'day') / repeatValue);\n            visibleDates = [];\n            for (let i = 0; i <= count; ++i)\n                visibleDates.push(first.add(i * repeatValue, 'day'));\n        }\n\n        setVisibleDates(visibleDates);\n        _setSelectedDates(selectedDates);\n    }, [currentGroupDates, date, repeatValuesMap]);\n\n    const addDate = useCallback(() => {\n        setVisibleDates(visibleDates => {\n            const last = visibleDates[visibleDates.length - 1];\n            const add = last.add(repeatValue, 'day');\n            if (!checkIfTooFarAhead(add))\n                setSelectedDates(selectedDates => [...selectedDates, add]);\n            return [...visibleDates, add];\n        });\n    }, [repeatValue, setSelectedDates, checkIfTooFarAhead]);\n\n    const removeDate = useCallback(() => {\n        setVisibleDates(visibleDates => {\n            const last = visibleDates[visibleDates.length - 1];\n            const reserved = currentGroupDates?.findIndex(gd => gd.isSame(last, 'day')) !== -1;\n            if (visibleDates.length <= 1 || reserved)\n                return visibleDates;\n            setSelectedDates(selectedDates => selectedDates.filter(gd => !gd.isSame(last, 'day')));\n            return visibleDates.slice(0, -1);\n        });\n    }, [currentGroupDates, setSelectedDates]);\n\n    const handleRepeatValueChange = useCallback(e => {\n        const newRepeatValue = e.target.value;\n        setRepeatValue(newRepeatValue);\n\n        const newDates = [date];\n        if (newRepeatValue > 0) {\n            for (let i = 1; i <= defaultAddCount; ++i)\n                newDates.push(date.add(i * newRepeatValue, 'day'));\n        }\n\n        setVisibleDates(newDates);\n        setSelectedDates(newDates.filter(d => !checkIfTooFarAhead(d)));\n    }, [date, defaultAddCount, setSelectedDates, checkIfTooFarAhead]);\n\n    const handleCheckedChange = useCallback(e => {\n        const index = e.target.value;\n        const checked = e.target.checked;\n        const date = visibleDates[index];\n\n        setSelectedDates(selectedDates => {\n            const newSelection = selectedDates.filter(gd => !gd.isSame(date, 'day'));\n            if (checked)\n                newSelection.push(date);\n            newSelection.sort((a, b) => a.valueOf() - b.valueOf());\n            return newSelection;\n        });\n    }, [visibleDates, setSelectedDates]);\n\n    return (\n        <div className={styles.wrapper}>\n            <div>\n                <Radio.Group\n                    className={styles.repeatTypes}\n                    value={repeatValue}\n                    onChange={handleRepeatValueChange}\n                    disabled={currentGroupDates?.length > 1 || disabled}\n                    buttonStyle=\"solid\"\n                    size=\"small\"\n                >\n                    <Radio.Button key={0} value={0}>Einzeltermin</Radio.Button>\n                    {Object.keys(repeatValuesMap).map(value => (\n                        <Radio.Button key={value} value={value}>{repeatValuesMap[value]}</Radio.Button>\n                    ))}\n                </Radio.Group>\n            </div>\n\n            {repeatValue > 0 &&\n                <>\n                    <div className={styles.dates}>\n                        {dates.map(({ date, checked, reserved, past, notAvailable, tooFarAhead }, i) => (\n                            <Checkbox\n                                className={cn({\n                                    unchecked: !checked,\n                                    danger: (reserved && !checked) || notAvailable,\n                                })}\n                                key={date}\n                                value={i}\n                                disabled={(!user?.admin && (past || tooFarAhead)) || notAvailable || disabled}\n                                checked={checked}\n                                onChange={handleCheckedChange}\n                            >\n                                <span className={styles.date}>{date.format('dd L')}</span>\n                                {!past && reserved && checked && <span className={styles.extra}> Aktuell reserviert</span>}\n                                {!past && reserved && !checked && <span className={styles.extra}> Wird storniert</span>}\n                                {!notAvailable && past && <span className={styles.extra}> Bereits vergangen</span>}\n                                {!notAvailable && tooFarAhead && <span className={styles.extra}> Zu weit in der Zukunft</span>}\n                                {notAvailable && <span className={styles.extra}> Nicht verfügbar</span>}\n                            </Checkbox>\n                        ))}\n                    </div>\n                    <div className={styles.buttons}>\n                        <Button\n                            disabled={disabled}\n                            icon={<PlusOutlined />}\n                            onClick={addDate}\n                        />\n                        <Button\n                            disabled={disabled}\n                            icon={<MinusOutlined />}\n                            onClick={removeDate}\n                        />\n                    </div>\n                </>\n            }\n        </div>\n    );\n}","import { Button, Checkbox, Input, Modal, message } from 'antd';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { deleteReservationGroupApi, getReservationsApi, patchReservationGroupApi, postReservationGroupApi } from '../api';\n\nimport { ErrorResult } from '../ErrorResult';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\nimport { GroupDatesForm } from './GroupDatesForm';\nimport { ReservationDetails } from './ReservationDetails';\nimport { StatusText } from '../admin/StatusText';\nimport { appContext } from '../AppContext';\nimport { authContext } from '../AuthContext';\nimport styles from './ReservationModalInner.module.css';\nimport { useApi } from '../useApi';\n\nexport function ReservationModalInner({\n    date,\n    courtId,\n    reservation,\n    today,\n    onFinish,\n    setReservations,\n}) {\n    const { courts, templates: { reservationPrice, reservationTos } } = useContext(appContext);\n    const { user } = useContext(authContext);\n\n    const courtName = courts.find(c => c.courtId === courtId)?.name;\n\n    const [changeReason, setChangeReason] = useState('');\n    const [tosAccepted, setTosAccepted] = useState(false);\n    const [newCustomName, setNewCustomName] = useState(null);\n    const [newGroupDates, setNewGroupDates] = useState(null);\n    const [editName, setEditName] = useState(false);\n    const prevErrorRef = useRef({});\n\n    const [groupReservations, setGroupReservations] = useState([]);\n    const [state, getGroupReservations] = useApi(getReservationsApi, setGroupReservations);\n\n    const [postState, postReservationGroup] = useApi(postReservationGroupApi, setReservations);\n    const [deleteState, deleteReservationGroup] = useApi(deleteReservationGroupApi, setReservations);\n    const [patchState, patchReservationGroup] = useApi(patchReservationGroupApi, setReservations);\n\n    const loading = state.loading || postState.loading || patchState.loading || deleteState.loading;\n\n    const adminEdit = reservation && user.admin && reservation?.userId !== user.userId;\n    const canEdit = user.admin || !reservation || reservation.userId === user.userId;\n\n    const groupDates = useMemo(() => groupReservations.map(r => r.date), [groupReservations]);\n\n    const newDates = useMemo(() => newGroupDates?.filter(\n        ngd => !groupDates.some(gd => gd.isSame(ngd, 'hour'))\n    ), [newGroupDates, groupDates]);\n    const cancelDates = useMemo(() => newGroupDates && groupDates.filter(\n        gd => !newGroupDates.some(ngd => gd.isSame(ngd, 'hour'))\n    ), [newGroupDates, groupDates]);\n    const changeCustomName = !!(groupDates && newCustomName);\n\n    useEffect(() => {\n        if (reservation?.groupId)\n            getGroupReservations({ query: { 'group-id': reservation?.groupId } });\n    }, [reservation, getGroupReservations]);\n\n    const handleGroupDatesChange = useCallback(dates => {\n        setNewGroupDates(dates);\n    }, []);\n\n    const handleAcceptTos = useCallback(e => {\n        setTosAccepted(e.target.checked);\n    }, []);\n\n    const handleEditName = useCallback(() => {\n        setEditName(true);\n    }, []);\n\n    const handleCancelEditName = useCallback(() => {\n        setEditName(false);\n        setNewCustomName(null);\n    }, []);\n\n    const handleNewCustomNameChange = useCallback(e => {\n        setNewCustomName(e.target.value);\n    }, []);\n\n    const handleChangeChangeReason = useCallback(e => {\n        setChangeReason(e.target.value);\n    }, []);\n\n    const handlePostReservation = useCallback(() => {\n        postReservationGroup(null, {\n            courtId,\n            dates: newDates,\n            userId: user.userId,\n            customName: newCustomName,\n        }, () => {\n            message.success(\"Reservierung erfolgreich\");\n            onFinish();\n        });\n    }, [\n        courtId,\n        newCustomName,\n        newDates,\n        onFinish,\n        postReservationGroup,\n        user,\n    ]);\n\n    const handleChangeReservation = useCallback(() => {\n        const doChange = () => {\n            patchReservationGroup({\n                path: {\n                    groupId: reservation.groupId\n                }\n            }, {\n                groupId: reservation.groupId,\n                dates: newGroupDates,\n                customName: newCustomName,\n                reason: adminEdit ? changeReason : undefined,\n            }, () => {\n                message.success(\"Speichern erfolgreich\");\n                onFinish();\n            });\n        };\n\n        Modal.confirm({\n            title: 'Wirklich speichern?',\n            icon: <ExclamationCircleOutlined />,\n            centered: true,\n            content: (\n                <div className={styles.wrapper}>\n\n                    {newDates.length > 0 &&\n                        <>\n                            <div className={styles.heading}>Neue Termine</div>\n                            <ul>\n                                {newDates.map(date => <li key={date}>{date.format('dd L')}</li>)}\n                            </ul>\n                        </>\n                    }\n\n                    {cancelDates.length > 0 &&\n                        <>\n                            <div className={styles.heading}>Zu Stornieren</div>\n                            <ul>\n                                {cancelDates.map(date => <li key={date}>{date.format('dd L')}</li>)}\n                            </ul>\n                        </>\n                    }\n\n                    {changeCustomName &&\n                        <>\n                            <div className={styles.heading}>Änderungen</div>\n                            <ul>\n                                <li>Name: <strong>{newCustomName}</strong></li>\n                            </ul>\n                        </>\n                    }\n\n                </div>\n            ),\n            okText: 'Bestätigen',\n            okType: 'danger',\n            cancelText: 'Abbrechen',\n            onOk: doChange\n        });\n    }, [\n        adminEdit,\n        cancelDates,\n        changeCustomName,\n        changeReason,\n        newCustomName,\n        newDates,\n        newGroupDates,\n        onFinish,\n        patchReservationGroup,\n        reservation,\n    ]);\n\n\n    const handleCancelReservation = useCallback(() => {\n        const doDelete = () => {\n            const reqParams = {\n                path: {\n                    groupId: reservation.groupId\n                }\n            };\n            const cb = () => {\n                message.success(\"Stornierung erfolgreich\");\n                onFinish();\n            }\n\n            if (adminEdit) {\n                // same as delete but with body\n                // to submit reason\n                patchReservationGroup(reqParams, {\n                    groupId: reservation.groupId,\n                    dates: [],\n                    reason: changeReason,\n                }, cb);\n            } else {\n                deleteReservationGroup(reqParams, null, cb);\n            }\n        };\n\n        if (groupDates.length <= 1) {\n            doDelete();\n        } else {\n            Modal.confirm({\n                title: 'Wirklich alle stornieren?',\n                icon: <ExclamationCircleOutlined />,\n                centered: true,\n                content: (\n                    <ul>\n                        {groupDates.map(date => (\n                            <li key={date}>{date.format('dd L')}</li>\n                        ))}\n                    </ul>\n                ),\n                okText: 'Bestätigen',\n                okType: 'danger',\n                cancelText: 'Abbrechen',\n                onOk: doDelete,\n            });\n        }\n    }, [\n        adminEdit,\n        changeReason,\n        deleteReservationGroup,\n        groupDates,\n        onFinish,\n        patchReservationGroup,\n        reservation,\n    ]);\n\n    useEffect(() => {\n        if (prevErrorRef.current.post === postState.error \n            && prevErrorRef.current.patch === patchState.error)\n            return;\n        prevErrorRef.current.post = postState.error;\n        prevErrorRef.current.patch = patchState.error;\n\n        const uaDates = postState.error?.unavailableDates || patchState.error?.unavailableDates;\n        const message = postState.error?.message || patchState.error?.message;\n        if (uaDates) {\n            Modal.error({\n                centered: true,\n                title: 'Reservierung fehlgeschlagen',\n                content: (\n                    <div>\n                        <div>\n                            Folgende Termine sind nicht verfügbar:\n                        </div>\n                        <ul>\n                            {uaDates.map(date => (\n                                <li key={date}>{date.format('dd L')}</li>\n                            ))}\n                        </ul>\n                    </div>\n                )\n            });\n        } else if (message === 'too many active reservations') {\n            const value = postState.error?.value || patchState.error?.value;\n            const max = postState.error?.max || patchState.error?.max;\n            const diff = Math.abs(value - max);\n            Modal.error({\n                centered: true,\n                title: 'Reservierungslimit erreicht',\n                content: (\n                    <div>\n                        {newGroupDates?.length > diff ?\n                            (\n                                <p>\n                                    Bitte entfernen Sie mindestens <strong>{diff}</strong> Termine.\n                                </p>\n                            ) : (\n                                <p>\n                                    Sie können aktuell keine weiteren Termine reservieren.\n                                </p>\n                            )\n                        }\n                        <p>\n                            Es können maximal {max} Reservierungen im voraus getätigt werden. Bereits vergangene Termine werden dabei nicht angerechnet.\n                        </p>\n                    </div>\n                )\n            });\n        }\n    }, [newGroupDates?.length, postState.error, patchState.error])\n\n    if (\n        state.error\n        || (postState.error && !postState.error.unavailableDates && postState.error.message !== 'too many active reservations')\n        || (patchState.error && !patchState.error.unavailableDates && patchState.error.message !== 'too many active reservations')\n        || deleteState.error\n    ) {\n        return (\n            <Modal\n                title=\"Reservierung\"\n                visible={true}\n                width={600}\n                centered\n                onCancel={onFinish}\n                onOk={onFinish}\n                footer={\n                    <div className={styles.footer}>\n                        <Button onClick={onFinish}>\n                            Abbrechen\n                        </Button>\n                    </div>\n                }\n            >\n                <div className={styles.wrapper}>\n                    <ErrorResult />\n                </div>\n            </Modal>\n        );\n    }\n\n    return (\n        <Modal\n            title=\"Reservierung\"\n            visible={true}\n            width={600}\n            centered\n            onCancel={onFinish}\n            onOk={onFinish}\n            footer={loading ?\n                (\n                    <StatusText\n                        loading\n                        text=\"Bitte warten...\"\n                    />\n                ) : (\n                    <div className={styles.footer}>\n                        <Button onClick={onFinish}>\n                            {canEdit ? 'Abbrechen' : 'Schließen'}\n                        </Button>\n                        {canEdit && (reservation ?\n                            (\n                                <>\n                                    <Button\n                                        type=\"danger\"\n                                        onClick={handleCancelReservation}\n                                        disabled={adminEdit && !changeReason}\n                                    >\n                                        {groupDates.length > 1 ? 'Alle stornieren' : 'Stornieren'}\n                                    </Button>\n                                    <Button\n                                        type=\"primary\"\n                                        onClick={handleChangeReservation}\n                                        disabled={!(newDates?.length || cancelDates?.length || changeCustomName) || (adminEdit && !changeReason)}\n                                    >\n                                        Speichern\n                                    </Button>\n                                </>\n                            ) : (\n                                <Button\n                                    disabled={(reservationTos.body && !tosAccepted) || !newDates?.length}\n                                    type=\"primary\"\n                                    onClick={handlePostReservation}\n                                >\n                                    Reservieren\n                                </Button>\n                            )\n                        )}\n                    </div>\n                )\n            }\n        >\n            <div className={styles.wrapper}>\n                <div>\n                    <ReservationDetails\n                        courtName={courtName}\n                        date={date}\n                        groupDates={newGroupDates || groupDates}\n                        name={editName ?\n                            (\n                                <>\n                                    <Input\n                                        className={styles.nameInput}\n                                        disabled={loading}\n                                        onChange={handleNewCustomNameChange}\n                                        placeholder=\"z.B. Training, ...\"\n                                        size=\"small\"\n                                        value={newCustomName}\n                                    />\n                                    <Button\n                                        disabled={loading}\n                                        onClick={handleCancelEditName}\n                                        size=\"small\"\n                                        type='link'\n                                    >\n                                        abbrechen\n                                    </Button>\n                                </>\n                            ) : (\n                                <>\n                                    {reservation?.customName || reservation?.name || user.name}\n                                    {user.admin &&\n                                        <Button\n                                            disabled={loading}\n                                            onClick={handleEditName}\n                                            size=\"small\"\n                                            type='link'\n                                        >\n                                            ändern\n                                        </Button>\n                                    }\n                                </>\n                            )\n                        }\n                        showAllDates={!canEdit}\n                        showDateRange={canEdit}\n                        repeat={canEdit &&\n                            <GroupDatesForm\n                                courtId={courtId}\n                                currentGroupDates={groupDates}\n                                date={date}\n                                disabled={loading}\n                                onGroupDatesChange={handleGroupDatesChange}\n                                today={today}\n                                unavailableDates={postState.error?.unavailableDates || patchState.error?.unavailableDates}\n                            />\n                        }\n                    />\n                </div>\n\n                {!reservation &&\n                    <>\n                        {reservationPrice.body &&\n                            <div>\n                                <h1>Preis</h1>\n                                <div dangerouslySetInnerHTML={{ __html: reservationPrice.body }} />\n                            </div>\n                        }\n\n                        {reservationTos.body &&\n                            <div>\n                                <h1>Nutzungsordnung</h1>\n                                <div dangerouslySetInnerHTML={{ __html: reservationTos.body }} />\n\n                                <Checkbox\n                                    checked={tosAccepted}\n                                    onChange={handleAcceptTos}\n                                    disabled={loading}\n                                >\n                                    Ich akzeptiere die Nutzungsordnung.\n                                </Checkbox>\n                            </div>\n                        }\n                    </>\n                }\n\n                {adminEdit &&\n                    <div className={styles.changeReason}>\n                        <Input.TextArea\n                            autoSize\n                            disabled={loading}\n                            onChange={handleChangeChangeReason}\n                            placeholder=\"Grund der Änderung\"\n                            required\n                            value={changeReason}\n                        />\n                        <div className={styles.changeReasonHint}>\n                            *Erforderlich. Der Inhaber der Reservierung wird über die Änderungen sowie dessen Grund per E-Mail informiert.\n                        </div>\n                    </div>\n                }\n            </div>\n        </Modal>\n    );\n}","import { Button, Modal, Result } from 'antd';\nimport React, { useCallback, useContext } from 'react';\n\nimport { authContext } from '../AuthContext';\nimport styles from './VerifyMailModal.module.css';\nimport { useHistory } from 'react-router-dom';\n\nexport function VerifyMailModal({\n    onClose\n}) {\n    const { user } = useContext(authContext);\n    const history = useHistory();\n\n    const handleChangeMailClick = useCallback(() => {\n        history.push('/profile');\n    }, [history]);\n    \n    const handleResendMail = useCallback(() => {\n        history.push('/verify-mail/send');\n    }, [history]);\n\n    return (\n        <Modal\n            title=\"E-Mail nicht verifiziert\"\n            visible={true}\n            centered\n            width={580}\n            onCancel={onClose}\n            onOk={onClose}\n            footer={null}\n        >\n            <Result\n                status=\"warning\"\n                title=\"Bitte bestätigen Sie Ihre E-Mail Adresse\"\n                extra={\n                    <div>\n                        <div>\n                            Klicken Sie auf den Bestätigungslink, den Sie bei Ihrer Registrierung an <strong>{user?.mail}</strong> erhalten haben.\n                        </div>\n                        <div className={styles.buttons}>\n                            <Button type=\"primary\" onClick={handleResendMail}>\n                                Bestätigungslink erneut senden\n                            </Button>\n                            <Button type=\"link\" onClick={handleChangeMailClick}>\n                                E-Mail Adresse ändern\n                            </Button>\n                        </div>\n                    </div>\n                }\n            />\n        </Modal>\n    );\n}","import React, { useContext } from 'react';\n\nimport { LoginModal } from '../user/LoginModal';\nimport { ReservationModalInner } from './ReservationModalInner';\nimport { VerifyMailModal } from '../user/VerifyMailModal';\nimport { authContext } from '../AuthContext';\n\nexport function ReservationModal(props) {\n    \n    const { user } = useContext(authContext);\n    const { onFinish } = props;\n\n    if (!user)\n        return <LoginModal onClose={onFinish} />\n\n    if (!user.verified)\n        return <VerifyMailModal onClose={onFinish} />\n\n    return <ReservationModalInner {...props} />;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cell\":\"SlotCell_cell__10BAl\",\"enabled\":\"SlotCell_enabled__3WkTf\",\"slot\":\"SlotCell_slot__2KRoY\",\"reserved\":\"SlotCell_reserved__1oREX\",\"disabled\":\"SlotCell_disabled__24bPq\",\"disabledText\":\"SlotCell_disabledText__34Sit\",\"loading\":\"SlotCell_loading__19J7J\",\"load\":\"SlotCell_load__YLQlz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"DayTable_wrapper__1Hl5M\",\"date\":\"DayTable_date__3HnYm\",\"today\":\"DayTable_today__3s1dj\",\"court\":\"DayTable_court__3mDRl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hoursTableWrapper\":\"HoursTable_hoursTableWrapper__2oqN9\",\"hoursTable\":\"HoursTable_hoursTable__1GyQk\",\"hour\":\"HoursTable_hour__2iAsO\",\"til\":\"HoursTable_til__27vFO\",\"highlight\":\"HoursTable_highlight__16BlN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tableWrapper\":\"ReservationCalendar_tableWrapper__Zzm8d\",\"tableScroller\":\"ReservationCalendar_tableScroller__1fVFR\"};","import React, { useCallback } from 'react';\n\nimport classNames from 'classnames/bind';\nimport styles from './SlotCell.module.css';\n\nconst cn = classNames.bind(styles);\n\nexport function SlotCell({\n    courtId,\n    courtName,\n    disabled = false,\n    disabledText,\n    hour,\n    loading = false,\n    onClick,\n    reservation,\n}) {\n    const handleClick = useCallback(() => {\n        if (!disabled)\n            onClick({ courtId, hour, reservation });\n    }, [courtId, disabled, hour, onClick, reservation]);\n\n    return (\n        <td\n            className={cn({\n                cell: true,\n                enabled: !disabled,\n            })}\n            onClick={handleClick}\n        >\n            <div\n                className={cn({\n                    slot: true,\n                    loading,\n                    reserved: reservation,\n                    disabled,\n                    disabledText,\n                })}\n                data-free-text=\"Frei\"\n                data-free-text-hover={`${hour} Uhr, ${courtName}`}\n            >\n                {!(disabled && disabledText) && reservation && (reservation.customName ?? reservation.name)}\n                {disabled && disabledText}\n            </div>\n        </td>\n    );\n}\n","import React, { useCallback, useContext, useMemo } from 'react';\n\nimport { SlotCell } from './SlotCell';\nimport { authContext } from '../AuthContext';\nimport { findReservation } from '../helper';\nimport styles from './DayTable.module.css';\n\nexport function DayTable({\n    courts,\n    date,\n    hours,\n    loading,\n    onSlotClick,\n    reservationDaysInAdvance,\n    reservations,\n    today,\n}) {\n    const { user } = useContext(authContext);\n    const isToday = useMemo(() => today.isSame(date, 'day'), [date, today]);\n    const inPast = useMemo(() => date.isBefore(today, 'day'), [date, today]);\n    const tooFarAhead = useMemo(() => \n        date.isAfter(today.add(reservationDaysInAdvance, 'day'), 'day'), [date, reservationDaysInAdvance, today]);\n\n    const courtsToday = useMemo(() => courts.map(({ courtId, name, disabled, disabledFromTil }) => {\n        const manuallyDisabled = disabled && date.isBetween(disabledFromTil[0], disabledFromTil[1], 'day', '[]');\n        return {\n            courtId,\n            name,\n            disabled: manuallyDisabled || (!user?.admin && (inPast || tooFarAhead)),\n            disabledText: manuallyDisabled ? 'Gesperrt' : null,\n        };\n    }), [user?.admin, courts, date, inPast, tooFarAhead]);\n\n    const handleClick = useCallback(({ courtId, hour, reservation }) => {\n        onSlotClick({\n            courtId,\n            date: date.hour(hour),\n            reservation,\n        });\n    }, [date, onSlotClick]);\n\n    return (\n        <div className={styles.wrapper}>\n            <table>\n                <thead>\n                    <tr>\n                        <th className={styles.date} colSpan={courtsToday.length}>\n                            {isToday && <span className={styles.today}>Heute</span>}\n                            {date.format('dd l')}\n                        </th>\n                    </tr>\n                    <tr>\n                        {courtsToday.map(({ courtId, name }) => (\n                            <td key={courtId}>\n                                <div className={styles.court}>\n                                    {name}\n                                </div>\n                            </td>\n                        ))}\n                    </tr>\n                </thead>\n                <tbody>\n                    {hours.map(hour => (\n                        <tr key={hour}>\n                            {courtsToday.map(({ courtId, name, disabled, disabledText }) => (\n                                <SlotCell\n                                    courtId={courtId}\n                                    courtName={name}\n                                    disabled={disabled}\n                                    disabledText={disabledText}\n                                    hour={hour}\n                                    key={courtId}\n                                    loading={loading}\n                                    onClick={handleClick}\n                                    reservation={findReservation(reservations, date.hour(hour), courtId)}\n                                />\n                            ))}\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n        </div>\n    );\n}\n","import React from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './HoursTable.module.css';\n\nconst cn = classNames.bind(styles);\n\nexport function HoursTable({\n    hours,\n    highlightHour,\n}) {\n    return (\n        <div className={styles.hoursTableWrapper}>\n            <table className={styles.hoursTable}>\n                <tbody>\n                    {hours.map(hour => (\n                        <tr key={hour} className={cn({ highlight: highlightHour === hour })}>\n                            <th>\n                                <div className={styles.hour}>\n                                    {hour} Uhr<br />\n                                    <span className={styles.til}>bis {hour + 1} Uhr</span>\n                                </div>\n                            </th>\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n        </div>\n    );\n}","import React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { DayTable } from './DayTable';\nimport { ErrorResult } from '../ErrorResult';\nimport { HoursTable } from './HoursTable';\nimport { ReservationModal } from './ReservationModal';\nimport { UPDATE_INTERVALS_SEC } from '../updateIntervals';\nimport { appContext } from '../AppContext';\nimport { getReservationsApi } from '../api';\nimport styles from './ReservationCalendar.module.css';\nimport { useApi } from '../useApi';\nimport { useUpdateEffect } from '../useUpdateEffect';\n\nconst VISIBLE_DATES_COUNT = 7; // week\n\nexport function ReservationCalendar({\n    highlightHour,\n    kiosk = false,\n    selectedDate,\n    today,\n}) {\n    const { courts, config: { visibleHours, reservationDaysInAdvance } } = useContext(appContext);\n\n    const [selectedSlot, setSelectedSlot] = useState();\n    const initialScrollDoneRef = useRef(false);\n    const scrollerRef = useRef();\n\n    const [reservations, setReservations] = useState(null);\n    const [state, getReservations] = useApi(getReservationsApi, setReservations); \n\n    const updateReservations = useCallback(() => getReservations({\n        query: {\n            start: selectedDate.startOf('week').toISOString(),\n            end: selectedDate.endOf('week').toISOString(),\n        }\n    }), [selectedDate, getReservations]);\n\n    useUpdateEffect(updateReservations, UPDATE_INTERVALS_SEC.RESERVATIONS);\n\n    useEffect(() => {\n        setReservations(null);\n        updateReservations();\n    }, [updateReservations]);\n\n    const hours = useMemo(() => {\n        const hours = [];\n        for (let i = parseInt(visibleHours[0]); i < parseInt(visibleHours[1]); ++i)\n            hours.push(i);\n        return hours;\n    }, [visibleHours]);\n\n    const visibleDates = useMemo(() => Array.from(Array(VISIBLE_DATES_COUNT)).map((_, i) =>\n        selectedDate.startOf('week').add(i, 'day') // startOf also sets hours, mins, secs to zero\n    ), [selectedDate]);\n\n    // scroll automatically to today's date\n    useEffect(() => {\n        if (initialScrollDoneRef.current || !scrollerRef.current)\n            return;\n        if (selectedDate.isSame(today, 'week')) {\n            initialScrollDoneRef.current = true;\n            const index = Math.abs(today.startOf('week').diff(today, 'day'));\n            requestAnimationFrame(() => {\n                scrollerRef.current.scrollLeft\n                    = ((scrollerRef.current.scrollWidth) / VISIBLE_DATES_COUNT) * index;\n            });\n        }\n    }, [selectedDate, today, reservations]);\n\n    const handleSlotClicked = useCallback(selectedSlot => {\n        if (!kiosk)\n            setSelectedSlot(selectedSlot);\n    }, [kiosk]);\n\n    const handleReservationFinish = useCallback(() => {\n        setSelectedSlot(null);\n    }, []);\n\n    if (state.error)\n        return (\n            <div className={styles.tableWrapper}>\n                <ErrorResult />\n            </div>\n        );\n\n    return (\n        <>\n            <div className={styles.tableWrapper}>\n                <HoursTable\n                    hours={hours}\n                    highlightHour={highlightHour}\n                />\n\n                <div className={styles.tableScroller} ref={scrollerRef}>\n                    {visibleDates.map(date => (\n                        <DayTable\n                            courts={courts}\n                            date={date}\n                            hours={hours}\n                            key={date}\n                            loading={!reservations}\n                            onSlotClick={handleSlotClicked}\n                            reservationDaysInAdvance={reservationDaysInAdvance}\n                            reservations={reservations}\n                            today={today}\n                        />\n                    ))}\n                </div>\n            </div>\n\n            {selectedSlot &&\n                <ReservationModal\n                    date={selectedSlot?.date}\n                    courtId={selectedSlot?.courtId}\n                    reservation={selectedSlot?.reservation}\n                    today={today}\n                    onFinish={handleReservationFinish}\n                    setReservations={setReservations}\n                />\n            }\n        </>\n    );\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"DateClock_wrapper__2wdCe\",\"time\":\"DateClock_time__1UaS1\",\"date\":\"DateClock_date__2fu_M\",\"clockDots\":\"DateClock_clockDots__1qZO2\",\"blink\":\"DateClock_blink__dDypK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"SystemLinkQr_wrapper__2CJMn\",\"qr\":\"SystemLinkQr_qr__ASBOr\",\"plain\":\"SystemLinkQr_plain__1yRC6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"KioskPage_wrapper__2lwpn\",\"top\":\"KioskPage_top__1rY1B\",\"title\":\"KioskPage_title__uTtKZ\",\"linkQr\":\"KioskPage_linkQr__6q4Tf\",\"orgName\":\"KioskPage_orgName__26BvU\",\"subTitle\":\"KioskPage_subTitle__1tHUZ\",\"alert\":\"KioskPage_alert__1zypA\"};","import React, { useEffect, useState } from 'react';\n\nimport dayjs from 'dayjs';\nimport styles from './DateClock.module.css';\n\nconst UPDATE_INTERVAL_MS = 5000;\n\nexport function DateClock() {\n\n    const [dateTime, setDateTime] = useState(() => dayjs());\n\n    useEffect(() => {\n        const int = setInterval(() => {\n            setDateTime(dayjs());\n        }, UPDATE_INTERVAL_MS);\n        return () => clearInterval(int);\n    }, []);\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.time}>\n                {dateTime.format('HH')}<span className={styles.clockDots}>:</span>{dateTime.format('mm')} Uhr\n            </div>\n            <div className={styles.date}>\n                {dateTime.format('dddd LL')}\n            </div>\n        </div>\n    );\n}","import React, { useContext } from 'react';\n\nimport QrCode from 'qrcode.react';\nimport { appContext } from '../AppContext';\nimport styles from './SystemLinkQr.module.css';\n\nexport function SystemLinkQr({\n    bgColor,\n}) {\n\n    const { config: { url } } = useContext(appContext);\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.qr}>\n                <QrCode\n                    value={url}\n                    size={150}\n                    bgColor={bgColor}\n                />\n            </div>\n            <div className={styles.plain}>\n                {url.replace(/(http|https):\\/\\//, '')}\n            </div>\n        </div>\n    );\n}","import React, { useContext, useEffect } from 'react';\nimport { UPDATE_INTERVALS_SEC, setDefaultUpdateIntervals } from '../updateIntervals';\n\nimport { Alert } from 'antd';\nimport { DateClock } from './DateClock';\nimport { ReservationCalendar } from '../calendar/ReservationCalendar';\nimport { SystemLinkQr } from './SystemLinkQr';\nimport { appContext } from '../AppContext';\nimport { parseQuery } from '../helper';\nimport styles from './KioskPage.module.css';\nimport { useLocation } from 'react-router-dom';\nimport { useTime } from '../calendar/useTime';\n\nexport function KioskPage() {\n\n    const { config: { announcement, orgName }, courts } = useContext(appContext);\n\n    const hour = useTime('hour');\n    const { search } = useLocation();\n\n    useEffect(() => {\n        const params = parseQuery(search);\n        let updateInterval = 60; // 1 minute, default value\n        try {\n            if (params['update'])\n                updateInterval = parseInt(params['update']);\n        } catch (e) { console.error(e); }\n\n        UPDATE_INTERVALS_SEC.RESERVATIONS = updateInterval;\n        UPDATE_INTERVALS_SEC.BASE_DATA = updateInterval * 10;\n        return setDefaultUpdateIntervals;\n    }, [search]);\n\n    return (\n        <div className={styles.wrapper}>\n\n            <div className={styles.top}>\n\n                <div className={styles.title}>\n                    <div className={styles.orgName}>\n                        {orgName}\n                    </div>\n                    <div className={styles.subTitle}>\n                        Reservierungssystem\n                    </div>\n                </div>\n                \n                <DateClock />\n\n                <div className={styles.linkQr}>\n                    <SystemLinkQr \n                        bgColor=\"#f0f2f5\"\n                    />\n                </div>\n\n            </div>\n\n            {announcement &&\n                <div className={styles.alert}>\n                    <Alert\n                        message={announcement}\n                        type=\"info\"\n                        showIcon\n                    />\n                </div>\n            }\n\n            {courts.map(({ courtId, name, disabled, disabledFromTil, disabledReason }) => (\n                disabled && (\n                    <div key={courtId} className={styles.alert}>\n                        <Alert\n                            message={`${name} ist gesperrt ab ${disabledFromTil[0].format('dd L')}${disabledFromTil[1] ? disabledFromTil[1].format('[ bis] dd L') : ''}${disabledReason ? `: ${disabledReason}` : ''}`}\n                            type=\"warning\"\n                            showIcon\n                        />\n                    </div>\n                )\n            ))}\n\n            <ReservationCalendar\n                highlightHour={hour.hour()}\n                kiosk\n                selectedDate={hour}\n                today={hour}\n            />\n        </div>\n    );\n}"],"sourceRoot":""}